{"version":3,"sources":["src/scenes/MenuScene.js","node_modules/easystarjs/src/instance.js","node_modules/easystarjs/src/node.js","node_modules/heap/lib/heap.js","node_modules/heap/index.js","node_modules/easystarjs/src/easystar.js","src/scenes/PlayScene.js","src/scenes/PlayScene2.js","src/scenes/PlayScene3.js","src/scenes/PauseScene.js","src/scenes/PauseScene2.js","src/scenes/PauseScene3.js","src/scenes/LeaderBoardScene.js","src/main.js","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["background","playbutton","title","Menu","leaderboardbutton","playerName","rules","continuebutton","MenuScene","key","active","data","load","image","add","setInteractive","on","pointer","prompt","length","alert","localStorage","setItem","destroy","scene","stop","start","Phaser","Scene","keys","PacMan","RedGhost","GreenGhost","PurpleGhost","GreyGhost","CoinLayer","BonusLayer","coins","bonus","coinScore","totalScore","level","topLayer","map","terrain","bonusF","text","tileset","properties","acceptableTiles","bonusFCheck","esc","resume","lives","speed","Srdce1","Srdce2","Srdce3","timedEvent","scoreField","spawn","PacManRespawnX","PacManRespawnY","RedGhostRespawnX","RedGhostRespawnY","RedGhostDeadX","RedGhostDeadY","GreenGhostRespawnX","GreenGhostRespawnY","GreenGhostDeadX","GreenGhostDeadY","PurpleGhostRespawnX","PurpleGhostRespawnY","PurpleGhostDeadX","PurpleGhostDeadY","GreyGhostRespawnX","GreyGhostRespawnY","GreyGhostDeadX","GreyGhostDeadY","GreenTargetValue","GreenTargetCoordinateX","GreenTargetCoordinateY","PurpleTargetValue","PurpleTargetCoordinateX","PurpleTargetCoordinateY","GreyTargetValue","GreyTargetCoordinateX","GreyTargetCoordinateY","finder","finder2","finder3","finder4","grid","distance","x1","y1","x2","y2","dx","dy","Math","sqrt","getTileID","x","y","tile","getTileAt","index","collectCoin","coin","setText","getItem","collectBonus","setTexture","setVelocityX","setVelocityY","time","delayedCall","waitEvent","damageR","pause","launch","W","isDown","A","S","D","respawnEvent","test","damageG","damageP","respawnEvent1","timedEvent1","damageGrey","respawnEvent2","timedEvent2","PlayScene","tilemapTiledJSON","input","keyboard","addKeys","addKey","Input","Keyboard","KeyCodes","ESC","fontSize","fill","setScrollFactor","text2","tilemap","addTilesetImage","createStaticLayer","setDepth","getObjectLayer","physics","staticGroup","forEach","object","obj","create","setScale","body","width","height","setCollisionByProperty","collide","sprite","setSize","collider","setCollideWorldBounds","overlap","easystarjs","require","easystar","js","col","push","setGrid","tilesets","tileProperties","i","firstgid","hasOwnProperty","setAcceptableTiles","winEvent","testObject","JSON","parse","scoreObject","score","undefined","j","tmp","stringify","text3","visible","loseEvent","spawn1Event","spawn2Event","spawn3Event","findPath","floor","path","calculate","path2","path3","path4","velocity","angle","JustDown","PlayScene2","PlayScene3","resumebutton","menubutton","PauseScene","PauseScene2","PauseScene3","backsbutton","back","scoreText","nameText","LeaderBoardScene","myCustomCanvas","document","createElement","id","style","appendChild","game","Game","type","AUTO","canvas","getElementById","audio","disableWebAudio","render","pixelArt","default","arcade","fps","gravity","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","remove","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvXA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5iBA;AAEA,IAAIC,IAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,QAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,WAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,UAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,UAAJ;AACA,IAAIC,KAAK,GAAG,CAAZ;AACA,IAAIC,QAAJ;AACA,IAAIC,GAAJ;AACA,IAAIC,OAAJ;AACA,IAAIC,MAAJ;AACA,IAAIC,IAAJ;AAEA,IAAIC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","file":"main.1e43358e.js","sourceRoot":"..","sourcesContent":["// inicializace promennych (kdyz se inicializuji v create, tak to nefunguje)\r\nvar background;\r\nvar playbutton;\r\nvar title;\r\nvar Menu = -1;\r\nvar leaderboardbutton;\r\nvar playerName;\r\nvar rules;\r\nvar continuebutton;\r\n\r\n// trida scena, rozsiruje PhaserScene a musi se exportovat\r\nexport class MenuScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"MenuScene\", active: true,  // vstupni data\r\n        })\r\n    }\r\n    init(data) {\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    preload() { // funkce ve ktere se nactou obrazky a zvuky ze souboru assets pro vsechny sceny\r\n\r\n        this.load.image(\"title\", \"./assets/title.png\");\r\n        this.load.image(\"menuBackground\", \"./assets/MenuBackground.jpg\");\r\n        this.load.image(\"menu\", \"./assets/Menu.png\")\r\n        this.load.image(\"resume\", \"./assets/Resume.png\")\r\n\r\n        this.load.image(\"play\", \"./assets/Play.png\");\r\n        this.load.image(\"leaderboard\", \"./assets/Leaderboard.png\");\r\n\r\n        this.load.image(\"PacMan\", \"./assets/Pacman.png\")\r\n        this.load.image(\"PacMan2\", \"./assets/PacMan2.png\")\r\n        this.load.image(\"RedGhost\", \"./assets/RedGhost.png\")\r\n        this.load.image(\"GreenGhost\", \"./assets/GreenGhost.png\")\r\n        this.load.image(\"PurpleGhost\", \"./assets/PurpleGhost.png\")\r\n        this.load.image(\"GreyGhost\", \"./assets/GreyGhost.png\")\r\n        this.load.image(\"BlackGhost\", \"./assets/BlackGhost.png\")\r\n        this.load.image(\"Srdce\", \"./assets/Srdce2.png\")\r\n        this.load.image(\"coin\", \"assets/Point.png\");\r\n        this.load.image(\"bonus\", \"assets/BonusPoint.png\");\r\n\r\n        this.load.image(\"rules\", \"./assets/Rules.png\");\r\n        this.load.image(\"background\", \"./assets/RedBackground.png\");\r\n        this.load.image(\"continue\", \"./assets/Continue.png\");\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    create() {\r\n\r\n        // souradnice x, y  a nazev obrazku, co se do toho da\r\n        Menu = 0;\r\n        \r\n        background = this.add.image(640, 448, \"background\")\r\n        title = this.add.image(640, 100, 'title');\r\n        playbutton = this.add.image(640, 250, 'play');\r\n        leaderboardbutton = this.add.image(640, 320, 'leaderboard');\r\n\r\n\r\n\r\n        playbutton.setInteractive();\r\n        leaderboardbutton.setInteractive();\r\n\r\n\r\n        playbutton.on('pointerdown', function (pointer) {\r\n            Menu = 1;\r\n\r\n            playerName = prompt(\"Please enter your nickname\", \"Pacman\");\r\n            if (playerName === null) {\r\n                playerName = \"Pacman\";\r\n            }\r\n            else {\r\n                while (playerName.length > 20) {\r\n                    alert('Please enter a shorter name');\r\n\r\n                    playerName = prompt(\"Please enter your nickname\", \"Pacman\");\r\n                }\r\n                localStorage.setItem(\"playerName\", playerName);\r\n            }\r\n        });\r\n\r\n\r\n\r\n        leaderboardbutton.on('pointerup', function (pointer) {\r\n            Menu = 2;\r\n\r\n        });\r\n\r\n    }\r\n\r\n    update() {\r\n\r\n        if (Menu === 1) {\r\n            \r\n            background.destroy();\r\n            title.destroy();\r\n            playbutton.destroy();\r\n            leaderboardbutton.destroy();\r\n\r\n            rules = this.add.image(640, 448, \"rules\");\r\n            continuebutton = this.add.image(1100, 828, 'continue');\r\n            continuebutton.setInteractive();\r\n            Menu = 0;\r\n            continuebutton.on('pointerdown', function (pointer) {   \r\n                Menu = 3;\r\n            });\r\n        }\r\n        \r\n        if (Menu === 3) {\r\n            this.scene.stop();\r\n            this.scene.start(\"PlayScene\")\r\n            Menu = 0;\r\n        }\r\n        if (Menu === 2) {\r\n            this.scene.start(\"LeaderBoardScene\")\r\n            Menu = 0;\r\n        }\r\n\r\n\r\n    }\r\n}","/**\n * Represents a single instance of EasyStar.\n * A path that is in the queue to eventually be found.\n */\nmodule.exports = function() {\n    this.pointsToAvoid = {};\n    this.startX;\n    this.callback;\n    this.startY;\n    this.endX;\n    this.endY;\n    this.nodeHash = {};\n    this.openList;\n};","/**\n* A simple Node that represents a single tile on the grid.\n* @param {Object} parent The parent node.\n* @param {Number} x The x position on the grid.\n* @param {Number} y The y position on the grid.\n* @param {Number} costSoFar How far this node is in moves*cost from the start.\n* @param {Number} simpleDistanceToTarget Manhatten distance to the end point.\n**/\nmodule.exports = function(parent, x, y, costSoFar, simpleDistanceToTarget) {\n    this.parent = parent;\n    this.x = x;\n    this.y = y;\n    this.costSoFar = costSoFar;\n    this.simpleDistanceToTarget = simpleDistanceToTarget;\n\n    /**\n    * @return {Number} Best guess distance of a cost using this node.\n    **/\n    this.bestGuessDistance = function() {\n        return this.costSoFar + this.simpleDistanceToTarget;\n    }\n};","// Generated by CoffeeScript 1.8.0\n(function() {\n  var Heap, defaultCmp, floor, heapify, heappop, heappush, heappushpop, heapreplace, insort, min, nlargest, nsmallest, updateItem, _siftdown, _siftup;\n\n  floor = Math.floor, min = Math.min;\n\n\n  /*\n  Default comparison function to be used\n   */\n\n  defaultCmp = function(x, y) {\n    if (x < y) {\n      return -1;\n    }\n    if (x > y) {\n      return 1;\n    }\n    return 0;\n  };\n\n\n  /*\n  Insert item x in list a, and keep it sorted assuming a is sorted.\n  \n  If x is already in a, insert it to the right of the rightmost x.\n  \n  Optional args lo (default 0) and hi (default a.length) bound the slice\n  of a to be searched.\n   */\n\n  insort = function(a, x, lo, hi, cmp) {\n    var mid;\n    if (lo == null) {\n      lo = 0;\n    }\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (lo < 0) {\n      throw new Error('lo must be non-negative');\n    }\n    if (hi == null) {\n      hi = a.length;\n    }\n    while (lo < hi) {\n      mid = floor((lo + hi) / 2);\n      if (cmp(x, a[mid]) < 0) {\n        hi = mid;\n      } else {\n        lo = mid + 1;\n      }\n    }\n    return ([].splice.apply(a, [lo, lo - lo].concat(x)), x);\n  };\n\n\n  /*\n  Push item onto heap, maintaining the heap invariant.\n   */\n\n  heappush = function(array, item, cmp) {\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    array.push(item);\n    return _siftdown(array, 0, array.length - 1, cmp);\n  };\n\n\n  /*\n  Pop the smallest item off the heap, maintaining the heap invariant.\n   */\n\n  heappop = function(array, cmp) {\n    var lastelt, returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    lastelt = array.pop();\n    if (array.length) {\n      returnitem = array[0];\n      array[0] = lastelt;\n      _siftup(array, 0, cmp);\n    } else {\n      returnitem = lastelt;\n    }\n    return returnitem;\n  };\n\n\n  /*\n  Pop and return the current smallest value, and add the new item.\n  \n  This is more efficient than heappop() followed by heappush(), and can be\n  more appropriate when using a fixed size heap. Note that the value\n  returned may be larger than item! That constrains reasonable use of\n  this routine unless written as part of a conditional replacement:\n      if item > array[0]\n        item = heapreplace(array, item)\n   */\n\n  heapreplace = function(array, item, cmp) {\n    var returnitem;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    returnitem = array[0];\n    array[0] = item;\n    _siftup(array, 0, cmp);\n    return returnitem;\n  };\n\n\n  /*\n  Fast version of a heappush followed by a heappop.\n   */\n\n  heappushpop = function(array, item, cmp) {\n    var _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (array.length && cmp(array[0], item) < 0) {\n      _ref = [array[0], item], item = _ref[0], array[0] = _ref[1];\n      _siftup(array, 0, cmp);\n    }\n    return item;\n  };\n\n\n  /*\n  Transform list into a heap, in-place, in O(array.length) time.\n   */\n\n  heapify = function(array, cmp) {\n    var i, _i, _j, _len, _ref, _ref1, _results, _results1;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    _ref1 = (function() {\n      _results1 = [];\n      for (var _j = 0, _ref = floor(array.length / 2); 0 <= _ref ? _j < _ref : _j > _ref; 0 <= _ref ? _j++ : _j--){ _results1.push(_j); }\n      return _results1;\n    }).apply(this).reverse();\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      i = _ref1[_i];\n      _results.push(_siftup(array, i, cmp));\n    }\n    return _results;\n  };\n\n\n  /*\n  Update the position of the given item in the heap.\n  This function should be called every time the item is being modified.\n   */\n\n  updateItem = function(array, item, cmp) {\n    var pos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    pos = array.indexOf(item);\n    if (pos === -1) {\n      return;\n    }\n    _siftdown(array, 0, pos, cmp);\n    return _siftup(array, pos, cmp);\n  };\n\n\n  /*\n  Find the n largest elements in a dataset.\n   */\n\n  nlargest = function(array, n, cmp) {\n    var elem, result, _i, _len, _ref;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    result = array.slice(0, n);\n    if (!result.length) {\n      return result;\n    }\n    heapify(result, cmp);\n    _ref = array.slice(n);\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      elem = _ref[_i];\n      heappushpop(result, elem, cmp);\n    }\n    return result.sort(cmp).reverse();\n  };\n\n\n  /*\n  Find the n smallest elements in a dataset.\n   */\n\n  nsmallest = function(array, n, cmp) {\n    var elem, i, los, result, _i, _j, _len, _ref, _ref1, _results;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    if (n * 10 <= array.length) {\n      result = array.slice(0, n).sort(cmp);\n      if (!result.length) {\n        return result;\n      }\n      los = result[result.length - 1];\n      _ref = array.slice(n);\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        elem = _ref[_i];\n        if (cmp(elem, los) < 0) {\n          insort(result, elem, 0, null, cmp);\n          result.pop();\n          los = result[result.length - 1];\n        }\n      }\n      return result;\n    }\n    heapify(array, cmp);\n    _results = [];\n    for (i = _j = 0, _ref1 = min(n, array.length); 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n      _results.push(heappop(array, cmp));\n    }\n    return _results;\n  };\n\n  _siftdown = function(array, startpos, pos, cmp) {\n    var newitem, parent, parentpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    newitem = array[pos];\n    while (pos > startpos) {\n      parentpos = (pos - 1) >> 1;\n      parent = array[parentpos];\n      if (cmp(newitem, parent) < 0) {\n        array[pos] = parent;\n        pos = parentpos;\n        continue;\n      }\n      break;\n    }\n    return array[pos] = newitem;\n  };\n\n  _siftup = function(array, pos, cmp) {\n    var childpos, endpos, newitem, rightpos, startpos;\n    if (cmp == null) {\n      cmp = defaultCmp;\n    }\n    endpos = array.length;\n    startpos = pos;\n    newitem = array[pos];\n    childpos = 2 * pos + 1;\n    while (childpos < endpos) {\n      rightpos = childpos + 1;\n      if (rightpos < endpos && !(cmp(array[childpos], array[rightpos]) < 0)) {\n        childpos = rightpos;\n      }\n      array[pos] = array[childpos];\n      pos = childpos;\n      childpos = 2 * pos + 1;\n    }\n    array[pos] = newitem;\n    return _siftdown(array, startpos, pos, cmp);\n  };\n\n  Heap = (function() {\n    Heap.push = heappush;\n\n    Heap.pop = heappop;\n\n    Heap.replace = heapreplace;\n\n    Heap.pushpop = heappushpop;\n\n    Heap.heapify = heapify;\n\n    Heap.updateItem = updateItem;\n\n    Heap.nlargest = nlargest;\n\n    Heap.nsmallest = nsmallest;\n\n    function Heap(cmp) {\n      this.cmp = cmp != null ? cmp : defaultCmp;\n      this.nodes = [];\n    }\n\n    Heap.prototype.push = function(x) {\n      return heappush(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pop = function() {\n      return heappop(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.peek = function() {\n      return this.nodes[0];\n    };\n\n    Heap.prototype.contains = function(x) {\n      return this.nodes.indexOf(x) !== -1;\n    };\n\n    Heap.prototype.replace = function(x) {\n      return heapreplace(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.pushpop = function(x) {\n      return heappushpop(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.heapify = function() {\n      return heapify(this.nodes, this.cmp);\n    };\n\n    Heap.prototype.updateItem = function(x) {\n      return updateItem(this.nodes, x, this.cmp);\n    };\n\n    Heap.prototype.clear = function() {\n      return this.nodes = [];\n    };\n\n    Heap.prototype.empty = function() {\n      return this.nodes.length === 0;\n    };\n\n    Heap.prototype.size = function() {\n      return this.nodes.length;\n    };\n\n    Heap.prototype.clone = function() {\n      var heap;\n      heap = new Heap();\n      heap.nodes = this.nodes.slice(0);\n      return heap;\n    };\n\n    Heap.prototype.toArray = function() {\n      return this.nodes.slice(0);\n    };\n\n    Heap.prototype.insert = Heap.prototype.push;\n\n    Heap.prototype.top = Heap.prototype.peek;\n\n    Heap.prototype.front = Heap.prototype.peek;\n\n    Heap.prototype.has = Heap.prototype.contains;\n\n    Heap.prototype.copy = Heap.prototype.clone;\n\n    return Heap;\n\n  })();\n\n  (function(root, factory) {\n    if (typeof define === 'function' && define.amd) {\n      return define([], factory);\n    } else if (typeof exports === 'object') {\n      return module.exports = factory();\n    } else {\n      return root.Heap = factory();\n    }\n  })(this, function() {\n    return Heap;\n  });\n\n}).call(this);\n","module.exports = require('./lib/heap');\n","/**\n*   EasyStar.js\n*   github.com/prettymuchbryce/EasyStarJS\n*   Licensed under the MIT license.\n*\n*   Implementation By Bryce Neal (@prettymuchbryce)\n**/\n\nvar EasyStar = {}\nvar Instance = require('./instance');\nvar Node = require('./node');\nvar Heap = require('heap');\n\nconst CLOSED_LIST = 0;\nconst OPEN_LIST = 1;\n\nmodule.exports = EasyStar;\n\nvar nextInstanceId = 1;\n\nEasyStar.js = function() {\n    var STRAIGHT_COST = 1.0;\n    var DIAGONAL_COST = 1.4;\n    var syncEnabled = false;\n    var pointsToAvoid = {};\n    var collisionGrid;\n    var costMap = {};\n    var pointsToCost = {};\n    var directionalConditions = {};\n    var allowCornerCutting = true;\n    var iterationsSoFar;\n    var instances = {};\n    var instanceQueue = [];\n    var iterationsPerCalculation = Number.MAX_VALUE;\n    var acceptableTiles;\n    var diagonalsEnabled = false;\n\n    /**\n    * Sets the collision grid that EasyStar uses.\n    *\n    * @param {Array|Number} tiles An array of numbers that represent\n    * which tiles in your grid should be considered\n    * acceptable, or \"walkable\".\n    **/\n    this.setAcceptableTiles = function(tiles) {\n        if (tiles instanceof Array) {\n            // Array\n            acceptableTiles = tiles;\n        } else if (!isNaN(parseFloat(tiles)) && isFinite(tiles)) {\n            // Number\n            acceptableTiles = [tiles];\n        }\n    };\n\n    /**\n    * Enables sync mode for this EasyStar instance..\n    * if you're into that sort of thing.\n    **/\n    this.enableSync = function() {\n        syncEnabled = true;\n    };\n\n    /**\n    * Disables sync mode for this EasyStar instance.\n    **/\n    this.disableSync = function() {\n        syncEnabled = false;\n    };\n\n    /**\n     * Enable diagonal pathfinding.\n     */\n    this.enableDiagonals = function() {\n        diagonalsEnabled = true;\n    }\n\n    /**\n     * Disable diagonal pathfinding.\n     */\n    this.disableDiagonals = function() {\n        diagonalsEnabled = false;\n    }\n\n    /**\n    * Sets the collision grid that EasyStar uses.\n    *\n    * @param {Array} grid The collision grid that this EasyStar instance will read from.\n    * This should be a 2D Array of Numbers.\n    **/\n    this.setGrid = function(grid) {\n        collisionGrid = grid;\n\n        //Setup cost map\n        for (var y = 0; y < collisionGrid.length; y++) {\n            for (var x = 0; x < collisionGrid[0].length; x++) {\n                if (!costMap[collisionGrid[y][x]]) {\n                    costMap[collisionGrid[y][x]] = 1\n                }\n            }\n        }\n    };\n\n    /**\n    * Sets the tile cost for a particular tile type.\n    *\n    * @param {Number} The tile type to set the cost for.\n    * @param {Number} The multiplicative cost associated with the given tile.\n    **/\n    this.setTileCost = function(tileType, cost) {\n        costMap[tileType] = cost;\n    };\n\n    /**\n    * Sets the an additional cost for a particular point.\n    * Overrides the cost from setTileCost.\n    *\n    * @param {Number} x The x value of the point to cost.\n    * @param {Number} y The y value of the point to cost.\n    * @param {Number} The multiplicative cost associated with the given point.\n    **/\n    this.setAdditionalPointCost = function(x, y, cost) {\n        if (pointsToCost[y] === undefined) {\n            pointsToCost[y] = {};\n        }\n        pointsToCost[y][x] = cost;\n    };\n\n    /**\n    * Remove the additional cost for a particular point.\n    *\n    * @param {Number} x The x value of the point to stop costing.\n    * @param {Number} y The y value of the point to stop costing.\n    **/\n    this.removeAdditionalPointCost = function(x, y) {\n        if (pointsToCost[y] !== undefined) {\n            delete pointsToCost[y][x];\n        }\n    }\n\n    /**\n    * Remove all additional point costs.\n    **/\n    this.removeAllAdditionalPointCosts = function() {\n        pointsToCost = {};\n    }\n\n    /**\n    * Sets a directional condition on a tile\n    *\n    * @param {Number} x The x value of the point.\n    * @param {Number} y The y value of the point.\n    * @param {Array.<String>} allowedDirections A list of all the allowed directions that can access\n    * the tile.\n    **/\n    this.setDirectionalCondition = function(x, y, allowedDirections) {\n        if (directionalConditions[y] === undefined) {\n            directionalConditions[y] = {};\n        }\n        directionalConditions[y][x] = allowedDirections;\n    };\n\n    /**\n    * Remove all directional conditions\n    **/\n    this.removeAllDirectionalConditions = function() {\n        directionalConditions = {};\n    };\n\n    /**\n    * Sets the number of search iterations per calculation.\n    * A lower number provides a slower result, but more practical if you\n    * have a large tile-map and don't want to block your thread while\n    * finding a path.\n    *\n    * @param {Number} iterations The number of searches to prefrom per calculate() call.\n    **/\n    this.setIterationsPerCalculation = function(iterations) {\n        iterationsPerCalculation = iterations;\n    };\n\n    /**\n    * Avoid a particular point on the grid,\n    * regardless of whether or not it is an acceptable tile.\n    *\n    * @param {Number} x The x value of the point to avoid.\n    * @param {Number} y The y value of the point to avoid.\n    **/\n    this.avoidAdditionalPoint = function(x, y) {\n        if (pointsToAvoid[y] === undefined) {\n            pointsToAvoid[y] = {};\n        }\n        pointsToAvoid[y][x] = 1;\n    };\n\n    /**\n    * Stop avoiding a particular point on the grid.\n    *\n    * @param {Number} x The x value of the point to stop avoiding.\n    * @param {Number} y The y value of the point to stop avoiding.\n    **/\n    this.stopAvoidingAdditionalPoint = function(x, y) {\n        if (pointsToAvoid[y] !== undefined) {\n            delete pointsToAvoid[y][x];\n        }\n    };\n\n    /**\n    * Enables corner cutting in diagonal movement.\n    **/\n    this.enableCornerCutting = function() {\n        allowCornerCutting = true;\n    };\n\n    /**\n    * Disables corner cutting in diagonal movement.\n    **/\n    this.disableCornerCutting = function() {\n        allowCornerCutting = false;\n    };\n\n    /**\n    * Stop avoiding all additional points on the grid.\n    **/\n    this.stopAvoidingAllAdditionalPoints = function() {\n        pointsToAvoid = {};\n    };\n\n    /**\n    * Find a path.\n    *\n    * @param {Number} startX The X position of the starting point.\n    * @param {Number} startY The Y position of the starting point.\n    * @param {Number} endX The X position of the ending point.\n    * @param {Number} endY The Y position of the ending point.\n    * @param {Function} callback A function that is called when your path\n    * is found, or no path is found.\n    * @return {Number} A numeric, non-zero value which identifies the created instance. This value can be passed to cancelPath to cancel the path calculation.\n    *\n    **/\n    this.findPath = function(startX, startY, endX, endY, callback) {\n        // Wraps the callback for sync vs async logic\n        var callbackWrapper = function(result) {\n            if (syncEnabled) {\n                callback(result);\n            } else {\n                setTimeout(function() {\n                    callback(result);\n                });\n            }\n        }\n\n        // No acceptable tiles were set\n        if (acceptableTiles === undefined) {\n            throw new Error(\"You can't set a path without first calling setAcceptableTiles() on EasyStar.\");\n        }\n        // No grid was set\n        if (collisionGrid === undefined) {\n            throw new Error(\"You can't set a path without first calling setGrid() on EasyStar.\");\n        }\n\n        // Start or endpoint outside of scope.\n        if (startX < 0 || startY < 0 || endX < 0 || endY < 0 ||\n        startX > collisionGrid[0].length-1 || startY > collisionGrid.length-1 ||\n        endX > collisionGrid[0].length-1 || endY > collisionGrid.length-1) {\n            throw new Error(\"Your start or end point is outside the scope of your grid.\");\n        }\n\n        // Start and end are the same tile.\n        if (startX===endX && startY===endY) {\n            callbackWrapper([]);\n            return;\n        }\n\n        // End point is not an acceptable tile.\n        var endTile = collisionGrid[endY][endX];\n        var isAcceptable = false;\n        for (var i = 0; i < acceptableTiles.length; i++) {\n            if (endTile === acceptableTiles[i]) {\n                isAcceptable = true;\n                break;\n            }\n        }\n\n        if (isAcceptable === false) {\n            callbackWrapper(null);\n            return;\n        }\n\n        // Create the instance\n        var instance = new Instance();\n        instance.openList = new Heap(function(nodeA, nodeB) {\n            return nodeA.bestGuessDistance() - nodeB.bestGuessDistance();\n        });\n        instance.isDoneCalculating = false;\n        instance.nodeHash = {};\n        instance.startX = startX;\n        instance.startY = startY;\n        instance.endX = endX;\n        instance.endY = endY;\n        instance.callback = callbackWrapper;\n\n        instance.openList.push(coordinateToNode(instance, instance.startX,\n            instance.startY, null, STRAIGHT_COST));\n\n        var instanceId = nextInstanceId ++;\n        instances[instanceId] = instance;\n        instanceQueue.push(instanceId);\n        return instanceId;\n    };\n\n    /**\n     * Cancel a path calculation.\n     *\n     * @param {Number} instanceId The instance ID of the path being calculated\n     * @return {Boolean} True if an instance was found and cancelled.\n     *\n     **/\n    this.cancelPath = function(instanceId) {\n        if (instanceId in instances) {\n            delete instances[instanceId];\n            // No need to remove it from instanceQueue\n            return true;\n        }\n        return false;\n    };\n\n    /**\n    * This method steps through the A* Algorithm in an attempt to\n    * find your path(s). It will search 4-8 tiles (depending on diagonals) for every calculation.\n    * You can change the number of calculations done in a call by using\n    * easystar.setIteratonsPerCalculation().\n    **/\n    this.calculate = function() {\n        if (instanceQueue.length === 0 || collisionGrid === undefined || acceptableTiles === undefined) {\n            return;\n        }\n        for (iterationsSoFar = 0; iterationsSoFar < iterationsPerCalculation; iterationsSoFar++) {\n            if (instanceQueue.length === 0) {\n                return;\n            }\n\n            if (syncEnabled) {\n                // If this is a sync instance, we want to make sure that it calculates synchronously.\n                iterationsSoFar = 0;\n            }\n\n            var instanceId = instanceQueue[0];\n            var instance = instances[instanceId];\n            if (typeof instance == 'undefined') {\n                // This instance was cancelled\n                instanceQueue.shift();\n                continue;\n            }\n\n            // Couldn't find a path.\n            if (instance.openList.size() === 0) {\n                instance.callback(null);\n                delete instances[instanceId];\n                instanceQueue.shift();\n                continue;\n            }\n\n            var searchNode = instance.openList.pop();\n\n            // Handles the case where we have found the destination\n            if (instance.endX === searchNode.x && instance.endY === searchNode.y) {\n                var path = [];\n                path.push({x: searchNode.x, y: searchNode.y});\n                var parent = searchNode.parent;\n                while (parent!=null) {\n                    path.push({x: parent.x, y:parent.y});\n                    parent = parent.parent;\n                }\n                path.reverse();\n                var ip = path;\n                instance.callback(ip);\n                delete instances[instanceId];\n                instanceQueue.shift();\n                continue;\n            }\n\n            searchNode.list = CLOSED_LIST;\n\n            if (searchNode.y > 0) {\n                checkAdjacentNode(instance, searchNode,\n                    0, -1, STRAIGHT_COST * getTileCost(searchNode.x, searchNode.y-1));\n            }\n            if (searchNode.x < collisionGrid[0].length-1) {\n                checkAdjacentNode(instance, searchNode,\n                    1, 0, STRAIGHT_COST * getTileCost(searchNode.x+1, searchNode.y));\n            }\n            if (searchNode.y < collisionGrid.length-1) {\n                checkAdjacentNode(instance, searchNode,\n                    0, 1, STRAIGHT_COST * getTileCost(searchNode.x, searchNode.y+1));\n            }\n            if (searchNode.x > 0) {\n                checkAdjacentNode(instance, searchNode,\n                    -1, 0, STRAIGHT_COST * getTileCost(searchNode.x-1, searchNode.y));\n            }\n            if (diagonalsEnabled) {\n                if (searchNode.x > 0 && searchNode.y > 0) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y-1, searchNode) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x-1, searchNode.y, searchNode))) {\n\n                        checkAdjacentNode(instance, searchNode,\n                            -1, -1, DIAGONAL_COST * getTileCost(searchNode.x-1, searchNode.y-1));\n                    }\n                }\n                if (searchNode.x < collisionGrid[0].length-1 && searchNode.y < collisionGrid.length-1) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y+1, searchNode) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x+1, searchNode.y, searchNode))) {\n\n                        checkAdjacentNode(instance, searchNode,\n                            1, 1, DIAGONAL_COST * getTileCost(searchNode.x+1, searchNode.y+1));\n                    }\n                }\n                if (searchNode.x < collisionGrid[0].length-1 && searchNode.y > 0) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y-1, searchNode) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x+1, searchNode.y, searchNode))) {\n\n                        checkAdjacentNode(instance, searchNode,\n                            1, -1, DIAGONAL_COST * getTileCost(searchNode.x+1, searchNode.y-1));\n                    }\n                }\n                if (searchNode.x > 0 && searchNode.y < collisionGrid.length-1) {\n\n                    if (allowCornerCutting ||\n                        (isTileWalkable(collisionGrid, acceptableTiles, searchNode.x, searchNode.y+1, searchNode) &&\n                        isTileWalkable(collisionGrid, acceptableTiles, searchNode.x-1, searchNode.y, searchNode))) {\n\n                        checkAdjacentNode(instance, searchNode,\n                            -1, 1, DIAGONAL_COST * getTileCost(searchNode.x-1, searchNode.y+1));\n                    }\n                }\n            }\n\n        }\n    };\n\n    // Private methods follow\n    var checkAdjacentNode = function(instance, searchNode, x, y, cost) {\n        var adjacentCoordinateX = searchNode.x+x;\n        var adjacentCoordinateY = searchNode.y+y;\n\n        if ((pointsToAvoid[adjacentCoordinateY] === undefined ||\n             pointsToAvoid[adjacentCoordinateY][adjacentCoordinateX] === undefined) &&\n            isTileWalkable(collisionGrid, acceptableTiles, adjacentCoordinateX, adjacentCoordinateY, searchNode)) {\n            var node = coordinateToNode(instance, adjacentCoordinateX,\n                adjacentCoordinateY, searchNode, cost);\n\n            if (node.list === undefined) {\n                node.list = OPEN_LIST;\n                instance.openList.push(node);\n            } else if (searchNode.costSoFar + cost < node.costSoFar) {\n                node.costSoFar = searchNode.costSoFar + cost;\n                node.parent = searchNode;\n                instance.openList.updateItem(node);\n            }\n        }\n    };\n\n    // Helpers\n    var isTileWalkable = function(collisionGrid, acceptableTiles, x, y, sourceNode) {\n        var directionalCondition = directionalConditions[y] && directionalConditions[y][x];\n        if (directionalCondition) {\n            var direction = calculateDirection(sourceNode.x - x, sourceNode.y - y)\n            var directionIncluded = function () {\n                for (var i = 0; i < directionalCondition.length; i++) {\n                    if (directionalCondition[i] === direction) return true\n                }\n                return false\n            }\n            if (!directionIncluded()) return false\n        }\n        for (var i = 0; i < acceptableTiles.length; i++) {\n            if (collisionGrid[y][x] === acceptableTiles[i]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    /**\n     * -1, -1 | 0, -1  | 1, -1\n     * -1,  0 | SOURCE | 1,  0\n     * -1,  1 | 0,  1  | 1,  1\n     */\n    var calculateDirection = function (diffX, diffY) {\n        if (diffX === 0 && diffY === -1) return EasyStar.TOP\n        else if (diffX === 1 && diffY === -1) return EasyStar.TOP_RIGHT\n        else if (diffX === 1 && diffY === 0) return EasyStar.RIGHT\n        else if (diffX === 1 && diffY === 1) return EasyStar.BOTTOM_RIGHT\n        else if (diffX === 0 && diffY === 1) return EasyStar.BOTTOM\n        else if (diffX === -1 && diffY === 1) return EasyStar.BOTTOM_LEFT\n        else if (diffX === -1 && diffY === 0) return EasyStar.LEFT\n        else if (diffX === -1 && diffY === -1) return EasyStar.TOP_LEFT\n        throw new Error('These differences are not valid: ' + diffX + ', ' + diffY)\n    };\n\n    var getTileCost = function(x, y) {\n        return (pointsToCost[y] && pointsToCost[y][x]) || costMap[collisionGrid[y][x]]\n    };\n\n    var coordinateToNode = function(instance, x, y, parent, cost) {\n        if (instance.nodeHash[y] !== undefined) {\n            if (instance.nodeHash[y][x] !== undefined) {\n                return instance.nodeHash[y][x];\n            }\n        } else {\n            instance.nodeHash[y] = {};\n        }\n        var simpleDistanceToTarget = getDistance(x, y, instance.endX, instance.endY);\n        if (parent!==null) {\n            var costSoFar = parent.costSoFar + cost;\n        } else {\n            costSoFar = 0;\n        }\n        var node = new Node(parent,x,y,costSoFar,simpleDistanceToTarget);\n        instance.nodeHash[y][x] = node;\n        return node;\n    };\n\n    var getDistance = function(x1,y1,x2,y2) {\n        if (diagonalsEnabled) {\n            // Octile distance\n            var dx = Math.abs(x1 - x2);\n            var dy = Math.abs(y1 - y2);\n            if (dx < dy) {\n                return DIAGONAL_COST * dx + dy;\n            } else {\n                return DIAGONAL_COST * dy + dx;\n            }\n        } else {\n            // Manhattan distance\n            var dx = Math.abs(x1 - x2);\n            var dy = Math.abs(y1 - y2);\n            return (dx + dy);\n        }\n    };\n}\n\nEasyStar.TOP = 'TOP'\nEasyStar.TOP_RIGHT = 'TOP_RIGHT'\nEasyStar.RIGHT = 'RIGHT'\nEasyStar.BOTTOM_RIGHT = 'BOTTOM_RIGHT'\nEasyStar.BOTTOM = 'BOTTOM'\nEasyStar.BOTTOM_LEFT = 'BOTTOM_LEFT'\nEasyStar.LEFT = 'LEFT'\nEasyStar.TOP_LEFT = 'TOP_LEFT'\n","// inicializace promennych \r\n\r\nvar keys;\r\nvar PacMan;\r\nvar RedGhost;\r\nvar GreenGhost;\r\nvar PurpleGhost;\r\nvar GreyGhost;\r\nvar CoinLayer;\r\nvar BonusLayer;\r\nvar coins;\r\nvar bonus;\r\nvar coinScore = 0;\r\nvar totalScore;\r\nvar level = 1;\r\nvar topLayer;\r\nvar map;\r\nvar terrain;\r\nvar bonusF;\r\nvar text;\r\n\r\nvar tileset;\r\nvar properties;\r\nvar acceptableTiles = [];\r\n\r\nvar bonusFCheck;\r\nvar esc;\r\nvar resume;\r\n\r\nvar lives = 3;\r\nvar speed = 320;\r\n\r\nvar Srdce1;\r\nvar Srdce2;\r\nvar Srdce3;\r\n\r\nvar timedEvent;\r\nvar scoreField = [];\r\nvar spawn = 0;\r\n\r\n// promenne se souradnicemi znovuobjeveni duchu a PacMana v případě kolize a ubrání života\r\n\r\nvar PacManRespawnX = 656;\r\nvar PacManRespawnY = 592;\r\n\r\nvar RedGhostRespawnX = 656;\r\nvar RedGhostRespawnY = 336;\r\nvar RedGhostDeadX = 640;\r\nvar RedGhostDeadY = 432;\r\n\r\nvar GreenGhostRespawnX = 1232;\r\nvar GreenGhostRespawnY = 464;\r\nvar GreenGhostDeadX = 658;\r\nvar GreenGhostDeadY = 400;\r\n\r\nvar PurpleGhostRespawnX = 48;\r\nvar PurpleGhostRespawnY = 464;\r\nvar PurpleGhostDeadX = 623;\r\nvar PurpleGhostDeadY = 400;\r\n\r\nvar GreyGhostRespawnX = 656;\r\nvar GreyGhostRespawnY = 848;\r\nvar GreyGhostDeadX = 640;\r\nvar GreyGhostDeadY = 464;\r\n\r\n// promenna se souradnicemi pohybu duchu\r\n\r\nvar GreenTargetValue = 1;\r\nvar GreenTargetCoordinateX;\r\nvar GreenTargetCoordinateY;\r\n\r\nvar PurpleTargetValue = 1;\r\nvar PurpleTargetCoordinateX;\r\nvar PurpleTargetCoordinateY;\r\n\r\nvar GreyTargetValue = 1;\r\nvar GreyTargetCoordinateX;\r\nvar GreyTargetCoordinateY;\r\n\r\nvar finder;\r\nvar finder2;\r\nvar finder3;\r\nvar finder4;\r\nvar grid;\r\n\r\n// metody cele sceny\r\n\r\n// metoda, ktera vypocita a vrati vzdalenost mezi 2 body\r\nfunction distance(x1, y1, x2, y2) {\r\n    var dx = x1 - x2;\r\n    var dy = y1 - y2;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\n// metoda, ktera vrati ID tile na dane souradnici\r\nfunction getTileID(x, y) {\r\n    var tile = map.getTileAt(x, y);\r\n    return tile.index;\r\n};\r\n\r\n// metoda, ktera se spusti pri kolizi PacMana s coinem, odstrani dany coin z herni plochy a pricte score, ktere zaroven aktualizuje\r\nfunction collectCoin(PacMan, coin) {\r\n    coin.destroy(coin.x, coin.y);\r\n    coinScore++;\r\n    totalScore++;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n\r\n    return false;\r\n}\r\n\r\n// metoda, ktera se spusti pri kolizi PacMana s bonusem, odstrani dany bonus z herni plochy a aktivuje ho, dale pricte a aktualizuje skore\r\nfunction collectBonus(PacMan, bonus) {\r\n    // pokud je efekt bonusu aktivni v dobe sebrani dalsiho bonusu, nastavi se promenna bonusFCheck, aby došlo s prodloužení trvání bonusu\r\n    if (bonusF === true) {\r\n        bonusFCheck = true;\r\n    }\r\n    bonus.destroy(bonus.x, bonus.y);\r\n    totalScore = totalScore + 5;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n    bonusF = true;\r\n    RedGhost.setTexture(\"BlackGhost\");\r\n\r\n    // zastavi duchy a nastavi jim odlisnou texturu\r\n    PurpleGhost.setTexture(\"BlackGhost\");\r\n    PurpleGhost.setVelocityX(0);\r\n    PurpleGhost.setVelocityY(0);\r\n\r\n    GreenGhost.setTexture(\"BlackGhost\");\r\n    GreenGhost.setVelocityX(0);\r\n    GreenGhost.setVelocityY(0);\r\n\r\n    GreyGhost.setTexture(\"BlackGhost\");\r\n    // casovana udalost, ktera se spusti po 3s, opet probudi duchy a nastavi jim puvodni texturu\r\n    timedEvent = this.time.delayedCall(3000, waitEvent, [], this);\r\n    function waitEvent() {\r\n\r\n        // pokud hrac nesebral druhy bonus v dobe trvani prvniho bonus skonci\r\n        if (bonusFCheck === false) {\r\n\r\n            RedGhost.setTexture(\"RedGhost\");\r\n            PurpleGhost.setTexture(\"PurpleGhost\");\r\n            GreenGhost.setTexture(\"GreenGhost\");\r\n            GreyGhost.setTexture(\"GreyGhost\");\r\n\r\n            // vypne aktivni bonus\r\n            bonusF = false;\r\n\r\n        }\r\n\r\n        bonusFCheck = false;\r\n\r\n    }\r\n    return false;\r\n}\r\n\r\n// metoda, ktera se spusti pri kolizi ducha a PacMana, celkem jsou 4 pro kazdeho ducha je 1 metoda\r\nfunction damageR() {\r\n    // pokud neni aktivni bonus\r\n    if (bonusF === false) {\r\n\r\n        // pozastavi hru, nastavi puvodni polohu duchum a PacMan\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene\");\r\n\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        // ubere zivot\r\n        lives = lives - 1;\r\n\r\n        // promenna ktera spousti znovuobjevovani duchu\r\n        spawn = 0;\r\n\r\n        return false;\r\n    }\r\n    // v pripade, ze je bonus aktivni pricte hraci skore a posle ducha do vezeni do doby nez se znovu objevi\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        RedGhost.x = RedGhostDeadX;\r\n        RedGhost.y = RedGhostDeadY;\r\n        // casovana udalost, kdy se po 3s znovuobjevi duch\r\n        timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                RedGhost.x = RedGhostRespawnX;\r\n                RedGhost.y = RedGhostRespawnY;\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// identicka metoda jako predchozi jen pro zeleneho ducha\r\nfunction damageG() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        var timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                GreenGhost.x = GreenGhostRespawnX;\r\n                GreenGhost.y = GreenGhostRespawnY;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// identicka metoda jako predchozi jen pro fialoveho ducha\r\nfunction damageP() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        PurpleGhost.x = PurpleGhostDeadX\r\n        PurpleGhost.y = 272;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n\r\n        var timedEvent1 = this.time.delayedCall(3000, respawnEvent1, [], this);\r\n        function respawnEvent1() {\r\n            if (lives === test) {\r\n                PurpleGhost.x = PurpleGhostRespawnX;\r\n                PurpleGhost.y = PurpleGhostRespawnY;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n// identicka metoda jako predchozi jen pro sediveho ducha\r\nfunction damageGrey() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n\r\n        PacMan.x = PacManRespawnX\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreyGhost.x = 640;\r\n        GreyGhost.y = 304;\r\n        var timedEvent2 = this.time.delayedCall(3000, respawnEvent2, [], this);\r\n        function respawnEvent2() {\r\n            if (lives === test) {\r\n                GreyGhost.x = GreyGhostRespawnX;\r\n                GreyGhost.y = GreyGhostRespawnY;\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// trida sceny, rozsiruje PhaserScene, exportuje se\r\nexport class PlayScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PlayScene\",\r\n        })\r\n    }\r\n    // dostava data z predchozi z sceny, pokud je potreba dostat data z minule sceny, zde se z data.promennaZMinuleSceny dá získat promenna predchazejici sceny\r\n    init(data) {\r\n\r\n    }\r\n\r\n    // nacteni dat (obrazky, mapa ..) ze slozky hry\r\n    preload() {\r\n        this.load.tilemapTiledJSON(\"map1\", \"./assets/Tilemaps/map1.json\")\r\n        this.load.image(\"terrain\", \"./assets/Tilesets/BlokyF.png\")\r\n    }\r\n    // zakladni metoda Phaseru, dochazi zde k vytvoreni zakladnich objektu a struktur hry\r\n    create() {\r\n        // obnovi puvodni hodnotu promennych\r\n        lives = 3;\r\n        bonusF = false;\r\n        bonusFCheck = false;\r\n        GreenTargetValue = 1;\r\n        PurpleTargetValue = 1;\r\n        GreyTargetValue = 1;\r\n        coinScore = 0;\r\n        totalScore = 0;\r\n        level = 1;\r\n        spawn = 0;\r\n\r\n        // nastavi vstup z klávesnice\r\n        keys = this.input.keyboard.addKeys(\"W,Q,E,A,D,S\");\r\n        esc = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC)\r\n\r\n        // ukazatel zivotu\r\n        Srdce1 = this.add.image(1000, 15, 'Srdce');\r\n        Srdce2 = this.add.image(1050, 15, 'Srdce');\r\n        Srdce3 = this.add.image(1100, 15, 'Srdce');\r\n\r\n        // textovy ukazatel skore a jmena hrace\r\n        text = this.add.text(100, 10, `Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`, {\r\n            fontSize: '20px',\r\n            fill: '#ffa500'\r\n        });\r\n        text.setScrollFactor(0);\r\n\r\n        // ukazatel poctu zivotu\r\n        var text2 = this.add.text(900, 10, `Lives:`, {\r\n            fontSize: '20px',\r\n            fill: '#ff0000'\r\n        });\r\n        text2.setScrollFactor(0);\r\n\r\n\r\n        // vytvoreni mapy podle .json mapy\r\n        map = this.add.tilemap(\"map1\");\r\n        terrain = map.addTilesetImage(\"Bloky\", \"terrain\")\r\n        topLayer = map.createStaticLayer(\"top\", [terrain], 0, 0).setDepth(-1)\r\n\r\n        // vytvoreni jednotlivych vrstev mapy podle .json souboru\r\n        CoinLayer = map.getObjectLayer('points')['objects'];\r\n        coins = this.physics.add.staticGroup()\r\n        CoinLayer.forEach(object => {\r\n            let obj = coins.create(object.x + 16, object.y - 16, \"coin\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });  \r\n        BonusLayer = map.getObjectLayer('bonus')['objects'];\r\n        bonus = this.physics.add.staticGroup()\r\n        BonusLayer.forEach(object => {\r\n            let obj = bonus.create(object.x + 16, object.y - 16, \"bonus\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });\r\n        // pokud ma tile vlastnost collide, nastavi se jeho kolize s objekty hry (PacMan a duchove)\r\n        topLayer.setCollisionByProperty({ collide: true });\r\n\r\n        // vytvori PacMan a duchy a nastavi jejich kolize s hranicemi a tily\r\n        PacMan = this.physics.add.sprite(PacManRespawnX, PacManRespawnY, \"PacMan\");\r\n        PacMan.setSize(30, 30);\r\n        RedGhost = this.physics.add.image(RedGhostRespawnX, RedGhostRespawnY, 'RedGhost');\r\n        GreenGhost = this.physics.add.image(GreenGhostDeadX, GreenGhostDeadY, 'GreenGhost');\r\n        PurpleGhost = this.physics.add.image(PurpleGhostDeadX, PurpleGhostDeadY, 'PurpleGhost');\r\n        GreyGhost = this.physics.add.image(GreyGhostDeadX, GreyGhostDeadY, 'GreyGhost');\r\n\r\n        this.physics.add.collider(PacMan, topLayer);\r\n        this.physics.add.collider(RedGhost, topLayer);\r\n        this.physics.add.collider(GreenGhost, topLayer);\r\n        this.physics.add.collider(GreyGhost, topLayer);\r\n        this.physics.add.collider(PurpleGhost, topLayer);\r\n\r\n        PacMan.setCollideWorldBounds(false);\r\n        RedGhost.setCollideWorldBounds(true);\r\n        PurpleGhost.setCollideWorldBounds(true);\r\n        GreyGhost.setCollideWorldBounds(true);\r\n        GreenGhost.setCollideWorldBounds(true);\r\n\r\n        //  nastavi se overlap, ktery hlida kolizi objektu a v pripade kolize spusti metodu\r\n        // this.physics.add.overlap(kdo, s cim, metodaKolize, null, this);\r\n        this.physics.add.overlap(PacMan, coins, collectCoin, null, this);\r\n        this.physics.add.overlap(PacMan, bonus, collectBonus, null, this);\r\n\r\n        this.physics.add.overlap(PacMan, RedGhost, damageR, null, this);\r\n        this.physics.add.overlap(PacMan, GreyGhost, damageGrey, null, this);\r\n        this.physics.add.overlap(PacMan, GreenGhost, damageG, null, this);\r\n        this.physics.add.overlap(PacMan, PurpleGhost, damageP, null, this);\r\n\r\n\r\n        // nastaveni pluginu, ktery se stara o hledani cesty v ramci tilu mapy\r\n        var easystarjs = require('easystarjs');\r\n        var easystar = new easystarjs.js();\r\n        finder = easystar;\r\n        finder2 = easystar;\r\n        finder3 = easystar;\r\n        finder4 = easystar;\r\n        grid = [];\r\n\r\n        // vlozi jednotlive tily do mrizky\r\n        for (var y = 0; y < map.height; y++) {\r\n            var col = [];\r\n            for (var x = 0; x < map.width; x++) {\r\n                col.push(getTileID(x, y));\r\n            }\r\n            grid.push(col);\r\n        }\r\n\r\n        finder.setGrid(grid);\r\n        finder2.setGrid(grid);\r\n        finder3.setGrid(grid);\r\n        finder4.setGrid(grid);\r\n\r\n        tileset = map.tilesets[0];\r\n        properties = tileset.tileProperties;\r\n        acceptableTiles = [];\r\n\r\n        // nastavi ktere tily jsou pruchozi\r\n        for (var i = tileset.firstgid - 1; i < 1120; i++) {\r\n            if (!properties.hasOwnProperty(i)) {\r\n\r\n                acceptableTiles.push(i + 1);\r\n                continue;\r\n            }\r\n            if (!properties[i].collide) { acceptableTiles.push(i + 1); }\r\n        }\r\n\r\n        finder.setAcceptableTiles(acceptableTiles);\r\n        finder2.setAcceptableTiles(acceptableTiles);\r\n        finder3.setAcceptableTiles(acceptableTiles);\r\n        finder4.setAcceptableTiles(acceptableTiles);\r\n\r\n    }\r\n\r\n    // metoda, ktera bezi neustale dokola, stara se o chod hry\r\n    update() {\r\n\r\n        // podminka kdyz hrac sesbira vsechny mince\r\n        if (coinScore === 183) {\r\n\r\n\r\n            PacMan.setVelocityX(0);\r\n            PacMan.setVelocityY(0);\r\n            RedGhost.setVelocityX(0);\r\n            RedGhost.setVelocityY(0);\r\n            GreenGhost.setVelocityX(0);\r\n            GreenGhost.setVelocityY(0);\r\n            GreyGhost.setVelocityX(0);\r\n            GreyGhost.setVelocityY(0);\r\n            PurpleGhost.setVelocityX(0);\r\n            PurpleGhost.setVelocityY(0);\r\n\r\n            // vytvori text o dokonceni levelu   \r\n            var text3 = this.add.text(230, 100, `You won this level!`, {\r\n                fontSize: '80px',\r\n                fill: '#ff0000'\r\n\r\n            });\r\n            text3.setScrollFactor(0);\r\n\r\n            // casovana udalost dokonceni urovne\r\n            timedEvent = this.time.delayedCall(3000, winEvent, [], this);\r\n            function winEvent() {\r\n\r\n                // nacteni skore a pridani nove serazeneho skore do pameti prohlizece\r\n                var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                if (testObject !== null) {\r\n                    scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                }\r\n                var scoreObject = {\r\n                    playerName: localStorage.getItem(\"playerName\"),\r\n                    score: totalScore,\r\n                };\r\n                if (scoreField === null || scoreField === undefined) {\r\n                    scoreField[0] = scoreObject;\r\n                }\r\n                else {\r\n                    scoreField.push(scoreObject);\r\n\r\n\r\n                    var length = scoreField.length;\r\n                    for (var i = (length - 1); i >= 0; i--) {\r\n                        for (var j = (length - i); j > 0; j--) {\r\n                            if (scoreField[j] === undefined) {\r\n                                break;\r\n                            }\r\n                            if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                var tmp = scoreField[j];\r\n                                scoreField[j] = scoreField[j - 1];\r\n                                scoreField[j - 1] = tmp;\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                // uloze pole skore do pameti prohlizece\r\n                localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                coinScore = 0;\r\n\r\n                // ukonci scenu a spusti dalsi uroven\r\n                this.scene.stop();\r\n                this.scene.launch(\"PlayScene2\", {totalScore: totalScore });\r\n\r\n            }\r\n        }\r\n\r\n        if (coinScore !== 183) {\r\n\r\n            if (lives === 2) {\r\n\r\n                Srdce3.visible = false\r\n            }\r\n            if (lives === 1) {\r\n\r\n                Srdce2.visible = false;\r\n            }\r\n\r\n            if (lives === 0) {\r\n\r\n\r\n                Srdce1.visible = false;\r\n                var text3 = this.add.text(325, 100, `Game Over :(`, {\r\n                    fontSize: '80px',\r\n                    fill: '#ff0000'\r\n                });\r\n                text3.setScrollFactor(0);\r\n                timedEvent = this.time.delayedCall(3000, loseEvent, [], this);\r\n                function loseEvent() {\r\n                    // nacteni skore a pridani nove serazeneho skore do pameti prohlizece\r\n                    var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                    if (testObject !== null) {\r\n                        scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                    }\r\n                    var scoreObject = {\r\n                        playerName: localStorage.getItem(\"playerName\"),\r\n                        score: totalScore,\r\n                    };\r\n                    if (scoreField === null || scoreField === undefined) {\r\n                        scoreField[0] = scoreObject;\r\n                    }\r\n                    else {\r\n                        scoreField.push(scoreObject);\r\n\r\n\r\n                        var length = scoreField.length;\r\n                        for (var i = (length - 1); i >= 0; i--) {\r\n                            for (var j = (length - i); j > 0; j--) {\r\n                                if (scoreField[j] === undefined) {\r\n                                    break;\r\n                                }\r\n                                if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                    var tmp = scoreField[j];\r\n                                    scoreField[j] = scoreField[j - 1];\r\n                                    scoreField[j - 1] = tmp;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // ulozi skore do pameti prohlizece\r\n                    localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                    totalScore = 0;\r\n                    coinScore = 0;\r\n\r\n                    // ukonci uroven a spusti menu    \r\n                    this.scene.stop();\r\n                    this.scene.launch(\"MenuScene\");\r\n\r\n                }\r\n            }\r\n\r\n\r\n            // znovuobjeveni duchu v 3s intervalech\r\n            if (spawn === 0) {\r\n                timedEvent = this.time.delayedCall(3000, spawn1Event, [], this);\r\n                function spawn1Event() {\r\n                    PurpleGhost.x = PurpleGhostRespawnX;\r\n                    PurpleGhost.y = PurpleGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(6000, spawn2Event, [], this);\r\n                function spawn2Event() {\r\n                    GreenGhost.x = GreenGhostRespawnX;\r\n                    GreenGhost.y = GreenGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(9000, spawn3Event, [], this);\r\n                function spawn3Event() {\r\n                    GreyGhost.x = GreyGhostRespawnX;\r\n                    GreyGhost.y = GreyGhostRespawnY;\r\n                }\r\n                spawn = 1;\r\n            }\r\n\r\n            // finder, diky pluginu easystar js vytvori pole path ve kterem jsou jednotlive tily, ktere vedou k cily nejkratsi cestou\r\n            finder.findPath(Math.floor(RedGhost.x / 32), Math.floor(RedGhost.y / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path) {\r\n                if (path === null || path[1] === undefined) {\r\n\r\n                } else {\r\n                    // pokud neni aktivni bonus, duchove se pohybuji po ceste vytvorene finderem, cesta k hraci se obnovuje a duch nasleduje tuto vytvorenou cestu, tudiz pronasleduje hrace\r\n                    if (bonusF === false) {\r\n\r\n                        if (path[1].x * 32 + 16 > RedGhost.x) {\r\n                            RedGhost.setVelocityX(speed / 2);\r\n                        }\r\n                        if (path[1].x * 32 + 16 < RedGhost.x) {\r\n                            RedGhost.setVelocityX(-speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 > RedGhost.y) {\r\n                            RedGhost.setVelocityY(speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 < RedGhost.y) {\r\n                            RedGhost.setVelocityY(-speed / 2);\r\n                        }\r\n\r\n                        if (path[1].x * 32 + 16 === RedGhost.x) {\r\n                            RedGhost.setVelocityX(0)\r\n                        }\r\n                        if (path[1].y * 32 + 16 === RedGhost.y) {\r\n                            RedGhost.setVelocityY(0)\r\n                        }\r\n\r\n                    }\r\n                }\r\n            });\r\n            // finder prepocita nalezenou cestu a opět se uloží do path\r\n            finder.calculate();\r\n\r\n            // zeleny duch se pohybuje po dane ceste a v pripade ze se hrac priblizi do kruhoveho okolo 192 pixelu zacne ho pronasledovat dokud se opet nevzdali, pokud hrac neni v danem okoli duch pokracuje po puvodni trase\r\n            // podminka hlidajici vzdalenost ducha a PacMana\r\n            if ((distance(PacMan.x, PacMan.y, GreenGhost.x, GreenGhost.y) <= 192)) {\r\n\r\n                // finder hleda nejkratsi cestu z pozice zeleneho ducha na pozici PacMana\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            // duch nasleduje vytvorenou cestu, nastavi rychlost ve smeru cestu\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n                // pokud neni hrac v blizkosti nasleduje duch vytvorenou cestu, ma 4 body mezi kterymi se pohybuje, v kazdem case se nastavi jeden z bodu a pokud duch dorazi do danych souradnic switch se zvysi o jedna a duch se pohybuje smerem k nasledujicim bodu\r\n                switch (GreenTargetValue) {\r\n                    case 1:\r\n                        GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 32 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreenTargetCoordinateX = 1056 / 32; GreenTargetCoordinateY = 32 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreenTargetCoordinateX = 1056 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n                // finder2 vytvari cestu na zaklade aktualni polohy zeleneho ducha a ciloveho bodu, ktery se nastavuje ve switchi\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), GreenTargetCoordinateX, GreenTargetCoordinateY, function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n            }\r\n\r\n            // analogie pro zeleneho ducha, fialovy ma jinou trasu ale pohyb funguje stejne\r\n            if ((distance(PacMan.x, PacMan.y, PurpleGhost.x, PurpleGhost.y) <= 192)) {\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n                switch (PurpleTargetValue) {\r\n                    case 1:\r\n                        PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: PurpleTargetCoordinateX = 192 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: PurpleTargetCoordinateX = 192 / 32; PurpleTargetCoordinateY = 32 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 32 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), PurpleTargetCoordinateX, PurpleTargetCoordinateY, function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n            }\r\n\r\n\r\n            // analogie zelenho ducha, pouze se sedivy pohybuje jinou trasou, vse funguje obdobne jako u zeleneho\r\n            if ((distance(PacMan.x, PacMan.y, GreyGhost.x, GreyGhost.y) <= 192)) {\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n\r\n                switch (GreyTargetValue) {\r\n                    case 1:\r\n                        GreyTargetCoordinateX = 192 / 32; GreyTargetCoordinateY = 832 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreyTargetCoordinateX = 192 / 32; GreyTargetCoordinateY = 32 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreyTargetCoordinateX = 1056 / 32; GreyTargetCoordinateY = 32 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreyTargetCoordinateX = 1056 / 32; GreyTargetCoordinateY = 832 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), GreyTargetCoordinateX, GreyTargetCoordinateY, function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n            }\r\n\r\n            // podminky pro pohyb pruchodem zleva doprava a zprava doleva, pri prekroceni mapy se PacMan objevi vlevo/vpravo v zavisloti na smeru pohybu\r\n            if (PacMan.x > 1270) {\r\n                PacMan.x = 10\r\n            }\r\n            if (PacMan.x < 10) {\r\n                PacMan.x = 1270\r\n            }\r\n\r\n            // podminky, ktere zastavuji hrace ve stredech tilu, usnadnuje zataceni\r\n            if (Math.floor((PacMan.x)) % 32 == 16) {\r\n                PacMan.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PacMan.y)) % 32 == 16) {\r\n                PacMan.setVelocityY(0);\r\n            }\r\n            if (Math.floor((RedGhost.x)) % 32 == 16) {\r\n                RedGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((RedGhost.y)) % 32 == 16) {\r\n                RedGhost.setVelocityY(0);\r\n            }\r\n            if (Math.floor((GreenGhost.x)) % 32 == 16) {\r\n                GreenGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreenGhost.y)) % 32 == 16) {\r\n                GreenGhost.setVelocityY(0);\r\n            }\r\n            if (Math.floor((GreyGhost.x)) % 32 == 16) {\r\n                GreyGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreyGhost.y)) % 32 == 16) {\r\n                GreyGhost.setVelocityY(0);\r\n            }\r\n            if (Math.floor((PurpleGhost.x)) % 32 == 16) {\r\n                PurpleGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PurpleGhost.y)) % 32 == 16) {\r\n                PurpleGhost.setVelocityY(0);\r\n            }\r\n\r\n            // zaokrouhlovaní souradnic duchu a PacMana z toho duvodu, ze pri pohybu rychlosti vznikaji nepresnosti (nepohybuji se po celych pixelech) a je ztizene zataceni\r\n            PacMan.y = Math.floor(PacMan.y);\r\n            PacMan.x = Math.floor(PacMan.x);\r\n\r\n            RedGhost.y = Math.floor(RedGhost.y)\r\n            RedGhost.x = Math.floor(RedGhost.x)\r\n\r\n            PurpleGhost.y = Math.floor(PurpleGhost.y)\r\n            PurpleGhost.x = Math.floor(PurpleGhost.x)\r\n\r\n            GreyGhost.y = Math.floor(GreyGhost.y)\r\n            GreyGhost.x = Math.floor(GreyGhost.x)\r\n\r\n            GreenGhost.y = Math.floor(GreenGhost.y)\r\n            GreenGhost.x = Math.floor(GreenGhost.x)\r\n\r\n            // otaceni PacMana do smeru pohybu\r\n            if (PacMan.body.velocity.x < 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan2\");\r\n            }\r\n\r\n            if (PacMan.body.velocity.x > 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y < 0) {\r\n                PacMan.angle = 270;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y > 0) {\r\n                PacMan.angle = 90;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n\r\n            // podminky zajistujici pohyb, pouzivaji nadefinovany vstup z klavesnice\r\n            if ((keys.W.isDown || keys.S.isDown || keys.A.isDown || keys.D.isDown)) {\r\n\r\n                // pohyb hrace\r\n                if (keys.W.isDown) {\r\n                    PacMan.setVelocityY(-1 * speed);\r\n                }\r\n                else if (keys.S.isDown) {\r\n                    PacMan.setVelocityY(speed);\r\n                }\r\n                if (keys.A.isDown) {\r\n                    PacMan.setVelocityX(-1 * speed);\r\n                }\r\n                else if (keys.D.isDown) {\r\n                    PacMan.setVelocityX(speed);\r\n                }\r\n\r\n            }\r\n            // pri zmacknuti klavesy ESC spusti pauzu   \r\n            if (Phaser.Input.Keyboard.JustDown(esc)) {\r\n                this.scene.pause();\r\n                this.scene.launch(\"PauseScene\");\r\n                keys.W.isDown = false;\r\n                keys.A.isDown = false;\r\n                keys.S.isDown = false;\r\n                keys.D.isDown = false;\r\n\r\n                resume = true;\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n","// PlayScene2 je analogicka k PlayScene, zmenene jsou pouze hodnoty a mapa, protoze funguje obdobne jsou komentáře pouze v PlayScene\r\n\r\nvar keys;\r\nvar PacMan;\r\nvar RedGhost;\r\nvar GreenGhost;\r\nvar PurpleGhost;\r\nvar GreyGhost;\r\nvar CoinLayer;\r\nvar BonusLayer;\r\nvar coins;\r\nvar bonus;\r\nvar coinScore = 0;\r\nvar totalScore;\r\nvar level = 1;\r\nvar topLayer;\r\nvar map;\r\nvar terrain;\r\nvar bonusF;\r\nvar text;\r\n\r\nvar tileset;\r\nvar properties;\r\nvar acceptableTiles = [];\r\n\r\nvar bonusFCheck;\r\nvar esc;\r\nvar resume;\r\n\r\nvar lives = 3;\r\nvar speed = 320;\r\n\r\nvar Srdce1;\r\nvar Srdce2;\r\nvar Srdce3;\r\n\r\nvar timedEvent;\r\nvar scoreField = [];\r\nvar spawn = 0;\r\n\r\nvar PacManRespawnX = 656;\r\nvar PacManRespawnY = 592;\r\n\r\nvar RedGhostRespawnX = 640;\r\nvar RedGhostRespawnY = 400;\r\nvar RedGhostDeadX = 640;\r\nvar RedGhostDeadY = 336;\r\n\r\nvar GreenGhostRespawnX = 1232;\r\nvar GreenGhostRespawnY = 400;\r\nvar GreenGhostDeadX = 658;\r\nvar GreenGhostDeadY = 272;\r\n\r\nvar PurpleGhostRespawnX = 48;\r\nvar PurpleGhostRespawnY = 400;\r\nvar PurpleGhostDeadX = 623;\r\nvar PurpleGhostDeadY = 272;\r\n\r\nvar GreyGhostRespawnX = 640;\r\nvar GreyGhostRespawnY = 400;\r\nvar GreyGhostDeadX = 640;\r\nvar GreyGhostDeadY = 304;\r\n\r\nvar GreenTargetValue = 1;\r\nvar GreenTargetCoordinateX;\r\nvar GreenTargetCoordinateY;\r\n\r\nvar PurpleTargetValue = 1;\r\nvar PurpleTargetCoordinateX;\r\nvar PurpleTargetCoordinateY;\r\n\r\nvar GreyTargetValue = 1;\r\nvar GreyTargetCoordinateX;\r\nvar GreyTargetCoordinateY;\r\n\r\nvar finder;\r\nvar finder2;\r\nvar finder3;\r\nvar finder4;\r\nvar grid;\r\n\r\n\r\nfunction distance(x1, y1, x2, y2) {\r\n    var dx = x1 - x2;\r\n    var dy = y1 - y2;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\n\r\nfunction getTileID(x, y) {\r\n    var tile = map.getTileAt(x, y);\r\n    return tile.index;\r\n}\r\n\r\n\r\nfunction collectCoin(PacMan, coin) {\r\n    coin.destroy(coin.x, coin.y);\r\n    coinScore++;\r\n    totalScore++;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n\r\n    return false;\r\n}\r\n\r\n\r\nfunction collectBonus(PacMan, bonus) {\r\n\r\n    if (bonusF === true) {\r\n        bonusFCheck = true;\r\n    }\r\n\r\n    bonus.destroy(bonus.x, bonus.y);\r\n    totalScore = totalScore + 5;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n    bonusF = true;\r\n    RedGhost.setTexture(\"BlackGhost\");\r\n\r\n    PurpleGhost.setTexture(\"BlackGhost\");\r\n    PurpleGhost.setVelocityX(0);\r\n    PurpleGhost.setVelocityY(0);\r\n\r\n    GreenGhost.setTexture(\"BlackGhost\");\r\n    GreenGhost.setVelocityX(0);\r\n    GreenGhost.setVelocityY(0);\r\n\r\n    GreyGhost.setTexture(\"BlackGhost\");\r\n    timedEvent = this.time.delayedCall(3000, waitEvent, [], this);\r\n    function waitEvent() {\r\n\r\n        if (bonusFCheck === false) {\r\n\r\n            RedGhost.setTexture(\"RedGhost\");\r\n            PurpleGhost.setTexture(\"PurpleGhost\");\r\n            GreenGhost.setTexture(\"GreenGhost\");\r\n            GreyGhost.setTexture(\"GreyGhost\");\r\n\r\n            bonusF = false;\r\n        }\r\n        bonusFCheck = false;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction damageR() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene2\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n\r\n        spawn = 0;\r\n\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        RedGhost.x = RedGhostDeadX;\r\n        RedGhost.y = RedGhostDeadY;\r\n        timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                RedGhost.x = RedGhostRespawnX;\r\n                RedGhost.y = RedGhostRespawnY;\r\n\r\n                                }\r\n                                }\r\n        }\r\n}\r\n\r\n\r\nfunction damageG() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene2\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        var timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                GreenGhost.x = GreenGhostRespawnX;\r\n                GreenGhost.y = GreenGhostRespawnY;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction damageP() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene2\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        PurpleGhost.x = PurpleGhostDeadX\r\n        PurpleGhost.y = 272;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n\r\n        var timedEvent1 = this.time.delayedCall(3000, respawnEvent1, [], this);\r\n        function respawnEvent1() {\r\n            if (lives === test) {\r\n                PurpleGhost.x = PurpleGhostRespawnX;\r\n                PurpleGhost.y = PurpleGhostRespawnY;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction damageGrey() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene2\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n\r\n        PacMan.x = PacManRespawnX\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreyGhost.x = 640;\r\n        GreyGhost.y = 304;\r\n        var timedEvent2 = this.time.delayedCall(3000, respawnEvent2, [], this);\r\n        function respawnEvent2() {\r\n            if (lives === test) {\r\n                GreyGhost.x = GreyGhostRespawnX;\r\n                GreyGhost.y = GreyGhostRespawnY;\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n// trida scena, rozsiruje PhaserScene a musi se exportovat\r\nexport class PlayScene2 extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PlayScene2\",   // vstupni data\r\n        })\r\n    }\r\n    init(data) {\r\n        totalScore = data.totalScore;\r\n    }\r\n\r\n    preload() {\r\n        this.load.tilemapTiledJSON(\"map2\", \"./assets/Tilemaps/map2.json\")\r\n        this.load.image(\"terrain\", \"./assets/Tilesets/BlokyF.png\")\r\n    }\r\n\r\n    create() {\r\n        lives = 3;\r\n        bonusF = false;\r\n        bonusFCheck = false;\r\n        GreenTargetValue = 1;\r\n        PurpleTargetValue = 1;\r\n        GreyTargetValue = 1;\r\n        coinScore = 0;\r\n        level = 2;\r\n        spawn = 0;\r\n\r\n        keys = this.input.keyboard.addKeys(\"W,Q,E,A,D,S\");\r\n        esc = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC)\r\n\r\n        Srdce1 = this.add.image(1000, 15, 'Srdce');\r\n        Srdce2 = this.add.image(1050, 15, 'Srdce');\r\n        Srdce3 = this.add.image(1100, 15, 'Srdce');\r\n\r\n        text = this.add.text(100, 10, `Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`, {\r\n            fontSize: '20px',\r\n            fill: '#ffa500'\r\n        });\r\n        text.setScrollFactor(0);\r\n\r\n\r\n        var text2 = this.add.text(900, 10, `Lives:`, {\r\n            fontSize: '20px',\r\n            fill: '#ff0000'\r\n        });\r\n        text2.setScrollFactor(0);\r\n\r\n\r\n        map = this.add.tilemap(\"map2\");\r\n        terrain = map.addTilesetImage(\"Bloky\", \"terrain\")\r\n        topLayer = map.createStaticLayer(\"top\", [terrain], 0, 0).setDepth(-1)\r\n\r\n        CoinLayer = map.getObjectLayer('points')['objects'];\r\n        coins = this.physics.add.staticGroup()\r\n        CoinLayer.forEach(object => {\r\n            let obj = coins.create(object.x + 16, object.y - 16, \"coin\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });\r\n\r\n        BonusLayer = map.getObjectLayer('bonus')['objects'];\r\n        bonus = this.physics.add.staticGroup()\r\n        BonusLayer.forEach(object => {\r\n            let obj = bonus.create(object.x + 16, object.y - 16, \"bonus\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });\r\n        topLayer.setCollisionByProperty({ collide: true });\r\n\r\n        PacMan = this.physics.add.sprite(PacManRespawnX, PacManRespawnY, \"PacMan\");\r\n        PacMan.setSize(30, 30);\r\n        RedGhost = this.physics.add.image(RedGhostRespawnX, RedGhostRespawnY, 'RedGhost');\r\n        GreenGhost = this.physics.add.image(GreenGhostDeadX, GreenGhostDeadY, 'GreenGhost');\r\n        PurpleGhost = this.physics.add.image(PurpleGhostDeadX, PurpleGhostDeadY, 'PurpleGhost');\r\n        GreyGhost = this.physics.add.image(GreyGhostDeadX, GreyGhostDeadY, 'GreyGhost');\r\n\r\n        this.physics.add.collider(PacMan, topLayer);\r\n        this.physics.add.collider(RedGhost, topLayer);\r\n        this.physics.add.collider(GreenGhost, topLayer);\r\n        this.physics.add.collider(GreyGhost, topLayer);\r\n        this.physics.add.collider(PurpleGhost, topLayer);\r\n\r\n        PacMan.setCollideWorldBounds(false);\r\n        RedGhost.setCollideWorldBounds(true);\r\n        PurpleGhost.setCollideWorldBounds(true);\r\n        GreyGhost.setCollideWorldBounds(true);\r\n        GreenGhost.setCollideWorldBounds(true);\r\n\r\n        this.physics.add.overlap(PacMan, coins, collectCoin, null, this);\r\n        this.physics.add.overlap(PacMan, bonus, collectBonus, null, this);\r\n\r\n        this.physics.add.overlap(PacMan, RedGhost, damageR, null, this);\r\n        this.physics.add.overlap(PacMan, GreyGhost, damageGrey, null, this);\r\n        this.physics.add.overlap(PacMan, GreenGhost, damageG, null, this);\r\n        this.physics.add.overlap(PacMan, PurpleGhost, damageP, null, this);\r\n\r\n\r\n        var easystarjs = require('easystarjs');\r\n        var easystar = new easystarjs.js();\r\n        finder = easystar;\r\n        finder2 = easystar;\r\n        finder3 = easystar;\r\n        finder4 = easystar;\r\n        grid = [];\r\n\r\n        for (var y = 0; y < map.height; y++) {\r\n            var col = [];\r\n            for (var x = 0; x < map.width; x++) {\r\n                col.push(getTileID(x, y));\r\n            }\r\n            grid.push(col);\r\n        }\r\n\r\n        finder.setGrid(grid);\r\n        finder2.setGrid(grid);\r\n        finder3.setGrid(grid);\r\n        finder4.setGrid(grid);\r\n\r\n        tileset = map.tilesets[0];\r\n        properties = tileset.tileProperties;\r\n        acceptableTiles = [];\r\n\r\n        for (var i = tileset.firstgid - 1; i < 1120; i++) {\r\n            if (!properties.hasOwnProperty(i)) {\r\n\r\n                acceptableTiles.push(i + 1);\r\n                continue;\r\n            }\r\n            if (!properties[i].collide) { acceptableTiles.push(i + 1); }\r\n        }\r\n\r\n        finder.setAcceptableTiles(acceptableTiles);\r\n        finder2.setAcceptableTiles(acceptableTiles);\r\n        finder3.setAcceptableTiles(acceptableTiles);\r\n        finder4.setAcceptableTiles(acceptableTiles);\r\n\r\n    }\r\n\r\n\r\n    update() { // funkce, ktera updatuje scenu\r\n        if (coinScore === 139) {\r\n\r\n                PacMan.setVelocityX(0);\r\n                PacMan.setVelocityY(0);\r\n                RedGhost.setVelocityX(0);\r\n                RedGhost.setVelocityY(0);\r\n                GreenGhost.setVelocityX(0);         \r\n                GreenGhost.setVelocityY(0);                       \r\n                GreyGhost.setVelocityX(0);\r\n                GreyGhost.setVelocityY(0);\r\n                PurpleGhost.setVelocityX(0);\r\n                PurpleGhost.setVelocityY(0);\r\n\r\n\r\n            var text3 = this.add.text(230, 100, `You won this level!`, {\r\n                fontSize: '80px',\r\n                fill: '#ff0000'\r\n\r\n            });\r\n            text3.setScrollFactor(0);\r\n            timedEvent = this.time.delayedCall(3000, winEvent, [], this);\r\n            function winEvent() {\r\n\r\n                // nacteni skore a pridani nove serazeneho skore do pameti browseru\r\n                var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                if (testObject !== null) {\r\n                    scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                }\r\n                var scoreObject = {\r\n                    playerName: localStorage.getItem(\"playerName\"),\r\n                    score: totalScore,\r\n                };\r\n                if (scoreField === null || scoreField === undefined) {\r\n                    scoreField[0] = scoreObject;\r\n                }\r\n                else {\r\n                    scoreField.push(scoreObject);\r\n\r\n\r\n                    var length = scoreField.length;\r\n                    for (var i = (length - 1); i >= 0; i--) {\r\n                        for (var j = (length - i); j > 0; j--) {\r\n                            if (scoreField[j] === undefined) {\r\n                                break;\r\n                            }\r\n                            if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                var tmp = scoreField[j];\r\n                                scoreField[j] = scoreField[j - 1];\r\n                                scoreField[j - 1] = tmp;\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                coinScore = 0;\r\n\r\n                this.scene.stop();\r\n                this.scene.launch(\"PlayScene3\", {totalScore: totalScore });\r\n\r\n            }\r\n        }\r\n        if (coinScore !== 139) {\r\n\r\n            if (lives === 2) {\r\n\r\n                Srdce3.visible = false\r\n            }\r\n            if (lives === 1) {\r\n\r\n                Srdce2.visible = false;\r\n            }\r\n\r\n            if (lives === 0) {\r\n\r\n\r\n                Srdce1.visible = false;\r\n                var text3 = this.add.text(325, 100, `Game Over :(`, {\r\n                    fontSize: '80px',\r\n                    fill: '#ff0000'\r\n                });\r\n                text3.setScrollFactor(0);\r\n                timedEvent = this.time.delayedCall(3000, loseEvent, [], this);\r\n                function loseEvent() {\r\n                    // nacteni skore a pridani nove serazeneho skore do pameti browseru\r\n                    var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                    if (testObject !== null) {\r\n                        scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                    }\r\n                    var scoreObject = {\r\n                        playerName: localStorage.getItem(\"playerName\"),\r\n                        score: totalScore,\r\n                    };\r\n                    if (scoreField === null || scoreField === undefined) {\r\n                        scoreField[0] = scoreObject;\r\n                    }\r\n                    else {\r\n                        scoreField.push(scoreObject);\r\n\r\n\r\n                        var length = scoreField.length;\r\n                        for (var i = (length - 1); i >= 0; i--) {\r\n                            for (var j = (length - i); j > 0; j--) {\r\n                                if (scoreField[j] === undefined) {\r\n                                    break;\r\n                                }\r\n                                if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                    var tmp = scoreField[j];\r\n                                    scoreField[j] = scoreField[j - 1];\r\n                                    scoreField[j - 1] = tmp;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                    totalScore = 0;\r\n                    coinScore = 0;\r\n\r\n                    this.scene.stop();\r\n                    this.scene.launch(\"MenuScene\");\r\n\r\n                }\r\n            }\r\n\r\n\r\n\r\n            if (spawn === 0) {\r\n                timedEvent = this.time.delayedCall(3000, spawn1Event, [], this);\r\n                function spawn1Event() {\r\n                    PurpleGhost.x = PurpleGhostRespawnX;\r\n                    PurpleGhost.y = PurpleGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(6000, spawn2Event, [], this);\r\n                function spawn2Event() {\r\n                    GreenGhost.x = GreenGhostRespawnX;\r\n                    GreenGhost.y = GreenGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(9000, spawn3Event, [], this);\r\n                function spawn3Event() {\r\n                    GreyGhost.x = GreyGhostRespawnX;\r\n                    GreyGhost.y = GreyGhostRespawnY;\r\n                }\r\n                spawn = 1;\r\n            }\r\n\r\n            finder.findPath(Math.floor(RedGhost.x / 32), Math.floor(RedGhost.y / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path) {\r\n                if (path === null || path[1] === undefined) {\r\n\r\n                } else {\r\n                    if (bonusF === false) {\r\n\r\n                        if (path[1].x * 32 + 16 > RedGhost.x) {\r\n                            RedGhost.setVelocityX(speed / 2);\r\n                        }\r\n                        if (path[1].x * 32 + 16 < RedGhost.x) {\r\n                            RedGhost.setVelocityX(-speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 > RedGhost.y) {\r\n                            RedGhost.setVelocityY(speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 < RedGhost.y) {\r\n                            RedGhost.setVelocityY(-speed / 2);\r\n                        }\r\n\r\n                        if (path[1].x * 32 + 16 === RedGhost.x) {\r\n                            RedGhost.setVelocityX(0)\r\n                        }\r\n                        if (path[1].y * 32 + 16 === RedGhost.y) {\r\n                            RedGhost.setVelocityY(0)\r\n                        }\r\n\r\n                    }\r\n                }\r\n            });\r\n            finder.calculate();\r\n\r\n            if ((distance(PacMan.x, PacMan.y, GreenGhost.x, GreenGhost.y) <= 192)) {\r\n\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n\r\n                switch (GreenTargetValue) {\r\n                    case 1:\r\n                        GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 96 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreenTargetCoordinateX = 864 / 32; GreenTargetCoordinateY = 96 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreenTargetCoordinateX = 736 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), GreenTargetCoordinateX, GreenTargetCoordinateY, function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n            }\r\n\r\n\r\n            if ((distance(PacMan.x, PacMan.y, PurpleGhost.x, PurpleGhost.y) <= 192)) {\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n                switch (PurpleTargetValue) {\r\n                    case 1:\r\n                        PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: PurpleTargetCoordinateX = 512 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: PurpleTargetCoordinateX = 384 / 32; PurpleTargetCoordinateY = 96 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 96 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), PurpleTargetCoordinateX, PurpleTargetCoordinateY, function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n            }\r\n\r\n\r\n\r\n            if ((distance(PacMan.x, PacMan.y, GreyGhost.x, GreyGhost.y) <= 192)) {\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n\r\n                switch (GreyTargetValue) {\r\n                    case 1:\r\n                        GreyTargetCoordinateX = 384 / 32; GreyTargetCoordinateY = 416 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreyTargetCoordinateX = 672 / 32; GreyTargetCoordinateY = 192 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreyTargetCoordinateX = 928 / 32; GreyTargetCoordinateY = 416 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreyTargetCoordinateX = 672 / 32; GreyTargetCoordinateY = 832 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), GreyTargetCoordinateX, GreyTargetCoordinateY, function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n            }\r\n\r\n\r\n            if (PacMan.x > 1270) {\r\n                PacMan.x = 10\r\n            }\r\n            if (PacMan.x < 10) {\r\n                PacMan.x = 1270\r\n            }\r\n\r\n            if (Math.floor((PacMan.x)) % 32 == 16) {\r\n\r\n                PacMan.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PacMan.y)) % 32 == 16) {\r\n                PacMan.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((RedGhost.x)) % 32 == 16) {\r\n\r\n                RedGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((RedGhost.y)) % 32 == 16) {\r\n                RedGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((GreenGhost.x)) % 32 == 16) {\r\n\r\n                GreenGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreenGhost.y)) % 32 == 16) {\r\n                GreenGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((GreyGhost.x)) % 32 == 16) {\r\n\r\n                GreyGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreyGhost.y)) % 32 == 16) {\r\n                GreyGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((PurpleGhost.x)) % 32 == 16) {\r\n\r\n                PurpleGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PurpleGhost.y)) % 32 == 16) {\r\n                PurpleGhost.setVelocityY(0);\r\n            }\r\n\r\n            PacMan.y = Math.floor(PacMan.y);\r\n            PacMan.x = Math.floor(PacMan.x);\r\n\r\n            RedGhost.y = Math.floor(RedGhost.y)\r\n            RedGhost.x = Math.floor(RedGhost.x)\r\n\r\n            PurpleGhost.y = Math.floor(PurpleGhost.y)\r\n            PurpleGhost.x = Math.floor(PurpleGhost.x)\r\n\r\n            GreyGhost.y = Math.floor(GreyGhost.y)\r\n            GreyGhost.x = Math.floor(GreyGhost.x)\r\n\r\n            GreenGhost.y = Math.floor(GreenGhost.y)\r\n            GreenGhost.x = Math.floor(GreenGhost.x)\r\n\r\n            if (PacMan.body.velocity.x < 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan2\");\r\n            }\r\n\r\n            if (PacMan.body.velocity.x > 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y < 0) {\r\n                PacMan.angle = 270;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y > 0) {\r\n                PacMan.angle = 90;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n\r\n            if ((keys.W.isDown || keys.S.isDown || keys.A.isDown || keys.D.isDown)) {\r\n\r\n                if (keys.W.isDown) {\r\n\r\n                    PacMan.setVelocityY(-1 * speed);\r\n\r\n                }\r\n                else if (keys.S.isDown) {\r\n                    PacMan.setVelocityY(speed);\r\n                }\r\n                if (keys.A.isDown) {\r\n                    PacMan.setVelocityX(-1 * speed);\r\n                }\r\n                else if (keys.D.isDown) {\r\n                    PacMan.setVelocityX(speed);\r\n                }\r\n\r\n            }\r\n\r\n            if (Phaser.Input.Keyboard.JustDown(esc)) {\r\n                this.scene.pause();\r\n                this.scene.launch(\"PauseScene2\");\r\n                keys.W.isDown = false;\r\n                keys.A.isDown = false;\r\n                keys.S.isDown = false;\r\n                keys.D.isDown = false;\r\n\r\n                resume = true;\r\n            }\r\n\r\n        }\r\n    }\r\n}","// PlayScene3 je analogicka k PlayScene, zmenene jsou pouze hodnoty a mapa, protoze funguje obdobne jsou komentáře pouze v PlayScene\r\n\r\nvar keys;\r\nvar PacMan;\r\nvar RedGhost;\r\nvar GreenGhost;\r\nvar PurpleGhost;\r\nvar GreyGhost;\r\nvar CoinLayer;\r\nvar BonusLayer;\r\nvar coins;\r\nvar bonus;\r\nvar coinScore = 0;\r\nvar totalScore;\r\nvar level = 1;\r\nvar topLayer;\r\nvar map;\r\nvar terrain;\r\nvar bonusF;\r\nvar text;\r\n\r\nvar tileset;\r\nvar properties;\r\nvar acceptableTiles = [];\r\n\r\nvar bonusFCheck;\r\nvar esc;\r\nvar resume;\r\n\r\nvar lives = 3;\r\nvar speed = 320;\r\n\r\nvar Srdce1;\r\nvar Srdce2;\r\nvar Srdce3;\r\n\r\nvar timedEvent;\r\nvar scoreField = [];\r\nvar spawn = 0;\r\n\r\nvar PacManRespawnX = 656;\r\nvar PacManRespawnY = 592;\r\n\r\nvar RedGhostRespawnX = 640;\r\nvar RedGhostRespawnY = 400;\r\nvar RedGhostDeadX = 640;\r\nvar RedGhostDeadY = 304;\r\n\r\nvar GreenGhostRespawnX = 1232;\r\nvar GreenGhostRespawnY = 400;\r\nvar GreenGhostDeadX = 658;\r\nvar GreenGhostDeadY = 240;\r\n\r\nvar PurpleGhostRespawnX = 48;\r\nvar PurpleGhostRespawnY = 592;\r\nvar PurpleGhostDeadX = 623;\r\nvar PurpleGhostDeadY = 240;\r\n\r\nvar GreyGhostRespawnX = 640;\r\nvar GreyGhostRespawnY = 864;\r\nvar GreyGhostDeadX = 640;\r\nvar GreyGhostDeadY = 272;\r\n\r\nvar GreenTargetValue = 1;\r\nvar GreenTargetCoordinateX;\r\nvar GreenTargetCoordinateY;\r\n\r\nvar PurpleTargetValue = 1;\r\nvar PurpleTargetCoordinateX;\r\nvar PurpleTargetCoordinateY;\r\n\r\nvar GreyTargetValue = 1;\r\nvar GreyTargetCoordinateX;\r\nvar GreyTargetCoordinateY;\r\n\r\nvar finder;\r\nvar finder2;\r\nvar finder3;\r\nvar finder4;\r\nvar grid;\r\n\r\n\r\nfunction distance(x1, y1, x2, y2) {\r\n    var dx = x1 - x2;\r\n    var dy = y1 - y2;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n}\r\n\r\n\r\nfunction getTileID(x, y) {\r\n    var tile = map.getTileAt(x, y);\r\n    return tile.index;\r\n}\r\n\r\n\r\nfunction collectCoin(PacMan, coin) {\r\n    coin.destroy(coin.x, coin.y);\r\n    coinScore++;\r\n    totalScore++;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n\r\n    return false;\r\n}\r\n\r\n\r\nfunction collectBonus(PacMan, bonus) {\r\n\r\n    if (bonusF === true) {\r\n        bonusFCheck = true;\r\n    }\r\n\r\n    bonus.destroy(bonus.x, bonus.y);\r\n    totalScore = totalScore + 5;\r\n    text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n    bonusF = true;\r\n    RedGhost.setTexture(\"BlackGhost\");\r\n\r\n    PurpleGhost.setTexture(\"BlackGhost\");\r\n    PurpleGhost.setVelocityX(0);\r\n    PurpleGhost.setVelocityY(0);\r\n\r\n    GreenGhost.setTexture(\"BlackGhost\");\r\n    GreenGhost.setVelocityX(0);\r\n    GreenGhost.setVelocityY(0);\r\n\r\n    GreyGhost.setTexture(\"BlackGhost\");\r\n    timedEvent = this.time.delayedCall(3000, waitEvent, [], this);\r\n    function waitEvent() {\r\n\r\n        if (bonusFCheck === false) {\r\n\r\n            RedGhost.setTexture(\"RedGhost\");\r\n            PurpleGhost.setTexture(\"PurpleGhost\");\r\n            GreenGhost.setTexture(\"GreenGhost\");\r\n            GreyGhost.setTexture(\"GreyGhost\");\r\n\r\n            bonusF = false;\r\n        }\r\n        bonusFCheck = false;\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction damageR() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene3\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n\r\n        spawn = 0;\r\n\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        RedGhost.x = RedGhostDeadX;\r\n        RedGhost.y = RedGhostDeadY;\r\n        timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                RedGhost.x = RedGhostRespawnX;\r\n                RedGhost.y = RedGhostRespawnY;\r\n\r\n                                }\r\n                                }\r\n        }\r\n}\r\n\r\n\r\nfunction damageG() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene3\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        var timedEvent = this.time.delayedCall(3000, respawnEvent, [], this);\r\n        function respawnEvent() {\r\n            if (lives === test) {\r\n                GreenGhost.x = GreenGhostRespawnX;\r\n                GreenGhost.y = GreenGhostRespawnY;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction damageP() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene3\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n        PacMan.x = PacManRespawnX;\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        PurpleGhost.x = PurpleGhostDeadX\r\n        PurpleGhost.y = 272;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n\r\n        var timedEvent1 = this.time.delayedCall(3000, respawnEvent1, [], this);\r\n        function respawnEvent1() {\r\n            if (lives === test) {\r\n                PurpleGhost.x = PurpleGhostRespawnX;\r\n                PurpleGhost.y = PurpleGhostRespawnY;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\nfunction damageGrey() {\r\n    if (bonusF === false) {\r\n\r\n        this.scene.pause();\r\n        this.scene.launch(\"PauseScene3\");\r\n        keys.W.isDown = false;\r\n        keys.A.isDown = false;\r\n        keys.S.isDown = false;\r\n        keys.D.isDown = false;\r\n\r\n        resume = true;\r\n\r\n        PurpleGhost.setVelocityX(0)\r\n        PurpleGhost.setVelocityY(0)\r\n        GreenGhost.setVelocityX(0)\r\n        GreenGhost.setVelocityY(0)\r\n\r\n        PacMan.setVelocityX(0)\r\n        PacMan.setVelocityY(0)\r\n\r\n        PacMan.x = PacManRespawnX\r\n        PacMan.y = PacManRespawnY;\r\n\r\n        RedGhost.x = RedGhostRespawnX;\r\n        RedGhost.y = RedGhostRespawnY;\r\n\r\n        PurpleGhost.x = PurpleGhostDeadX;\r\n        PurpleGhost.y = PurpleGhostDeadY;\r\n\r\n        GreyGhost.x = GreyGhostDeadX;\r\n        GreyGhost.y = GreyGhostDeadY;\r\n\r\n        GreenGhost.x = GreenGhostDeadX;\r\n        GreenGhost.y = GreenGhostDeadY;\r\n\r\n        lives = lives - 1;\r\n        spawn = 0;\r\n        return false;\r\n    }\r\n    else {\r\n        var test = lives;\r\n        totalScore = totalScore + 10;\r\n        text.setText(`Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`)\r\n        GreyGhost.x = 640;\r\n        GreyGhost.y = 304;\r\n        var timedEvent2 = this.time.delayedCall(3000, respawnEvent2, [], this);\r\n        function respawnEvent2() {\r\n            if (lives === test) {\r\n                GreyGhost.x = GreyGhostRespawnX;\r\n                GreyGhost.y = GreyGhostRespawnY;\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n// trida scena, rozsiruje PhaserScene a musi se exportovat\r\nexport class PlayScene3 extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PlayScene3\",   // vstupni data\r\n        })\r\n    }\r\n    init(data) {\r\n        totalScore = data.totalScore;\r\n    }\r\n\r\n    preload() {\r\n        this.load.tilemapTiledJSON(\"map3\", \"./assets/Tilemaps/map3.json\")\r\n        this.load.image(\"terrain\", \"./assets/Tilesets/BlokyF.png\")\r\n    }\r\n\r\n    create() {\r\n        lives = 3;\r\n        bonusF = false;\r\n        bonusFCheck = false;\r\n        GreenTargetValue = 1;\r\n        PurpleTargetValue = 1;\r\n        GreyTargetValue = 1;\r\n        coinScore = 0;\r\n        level = 2;\r\n        spawn = 0;\r\n\r\n        keys = this.input.keyboard.addKeys(\"W,Q,E,A,D,S\");\r\n        esc = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC)\r\n\r\n        Srdce1 = this.add.image(1000, 15, 'Srdce');\r\n        Srdce2 = this.add.image(1050, 15, 'Srdce');\r\n        Srdce3 = this.add.image(1100, 15, 'Srdce');\r\n\r\n        text = this.add.text(100, 10, `Nickname: ${localStorage.getItem(\"playerName\")}   Score: ${totalScore}`, {\r\n            fontSize: '20px',\r\n            fill: '#ffa500'\r\n        });\r\n        text.setScrollFactor(0);\r\n\r\n\r\n        var text2 = this.add.text(900, 10, `Lives:`, {\r\n            fontSize: '20px',\r\n            fill: '#ff0000'\r\n        });\r\n        text2.setScrollFactor(0);\r\n\r\n\r\n        map = this.add.tilemap(\"map3\");\r\n        terrain = map.addTilesetImage(\"Bloky\", \"terrain\")\r\n        topLayer = map.createStaticLayer(\"top\", [terrain], 0, 0).setDepth(-1)\r\n\r\n        CoinLayer = map.getObjectLayer('points')['objects'];\r\n        coins = this.physics.add.staticGroup()\r\n        CoinLayer.forEach(object => {\r\n            let obj = coins.create(object.x + 16, object.y - 16, \"coin\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });\r\n        BonusLayer = map.getObjectLayer('bonus')['objects'];\r\n        bonus = this.physics.add.staticGroup()\r\n        BonusLayer.forEach(object => {\r\n            let obj = bonus.create(object.x + 16, object.y - 16, \"bonus\");\r\n            obj.setScale(0.5)\r\n            obj.body.width = object.width;\r\n            obj.body.height = object.height;\r\n        });\r\n        topLayer.setCollisionByProperty({ collide: true });\r\n\r\n        PacMan = this.physics.add.sprite(PacManRespawnX, PacManRespawnY, \"PacMan\");\r\n        PacMan.setSize(30, 30);\r\n        RedGhost = this.physics.add.image(RedGhostRespawnX, RedGhostRespawnY, 'RedGhost');\r\n        GreenGhost = this.physics.add.image(GreenGhostDeadX, GreenGhostDeadY, 'GreenGhost');\r\n        PurpleGhost = this.physics.add.image(PurpleGhostDeadX, PurpleGhostDeadY, 'PurpleGhost');\r\n        GreyGhost = this.physics.add.image(GreyGhostDeadX, GreyGhostDeadY, 'GreyGhost');\r\n\r\n        this.physics.add.collider(PacMan, topLayer);\r\n        this.physics.add.collider(RedGhost, topLayer);\r\n        this.physics.add.collider(GreenGhost, topLayer);\r\n        this.physics.add.collider(GreyGhost, topLayer);\r\n        this.physics.add.collider(PurpleGhost, topLayer);\r\n\r\n        PacMan.setCollideWorldBounds(false);\r\n        RedGhost.setCollideWorldBounds(true);\r\n        PurpleGhost.setCollideWorldBounds(true);\r\n        GreyGhost.setCollideWorldBounds(true);\r\n        GreenGhost.setCollideWorldBounds(true);\r\n\r\n        this.physics.add.overlap(PacMan, coins, collectCoin, null, this);\r\n        this.physics.add.overlap(PacMan, bonus, collectBonus, null, this);\r\n\r\n        this.physics.add.overlap(PacMan, RedGhost, damageR, null, this);\r\n        this.physics.add.overlap(PacMan, GreyGhost, damageGrey, null, this);\r\n        this.physics.add.overlap(PacMan, GreenGhost, damageG, null, this);\r\n        this.physics.add.overlap(PacMan, PurpleGhost, damageP, null, this);\r\n\r\n\r\n        var easystarjs = require('easystarjs');\r\n        var easystar = new easystarjs.js();\r\n        finder = easystar;\r\n        finder2 = easystar;\r\n        finder3 = easystar;\r\n        finder4 = easystar;\r\n        grid = [];\r\n\r\n        for (var y = 0; y < map.height; y++) {\r\n            var col = [];\r\n            for (var x = 0; x < map.width; x++) {\r\n                col.push(getTileID(x, y));\r\n            }\r\n            grid.push(col);\r\n        }\r\n\r\n        finder.setGrid(grid);\r\n        finder2.setGrid(grid);\r\n        finder3.setGrid(grid);\r\n        finder4.setGrid(grid);\r\n\r\n        tileset = map.tilesets[0];\r\n        properties = tileset.tileProperties;\r\n        acceptableTiles = [];\r\n\r\n        for (var i = tileset.firstgid - 1; i < 1120; i++) {\r\n            if (!properties.hasOwnProperty(i)) {\r\n\r\n                acceptableTiles.push(i + 1);\r\n                continue;\r\n            }\r\n            if (!properties[i].collide) { acceptableTiles.push(i + 1); }\r\n        }\r\n\r\n        finder.setAcceptableTiles(acceptableTiles);\r\n        finder2.setAcceptableTiles(acceptableTiles);\r\n        finder3.setAcceptableTiles(acceptableTiles);\r\n        finder4.setAcceptableTiles(acceptableTiles);\r\n\r\n    }\r\n\r\n\r\n    update() { // funkce, ktera updatuje scenu\r\n        if (coinScore === 108) {\r\n\r\n                PacMan.setVelocityX(0);\r\n                PacMan.setVelocityY(0);\r\n                RedGhost.setVelocityX(0);\r\n                RedGhost.setVelocityY(0);\r\n                GreenGhost.setVelocityX(0);         \r\n                GreenGhost.setVelocityY(0);                       \r\n                GreyGhost.setVelocityX(0);\r\n                GreyGhost.setVelocityY(0);\r\n                PurpleGhost.setVelocityX(0);\r\n                PurpleGhost.setVelocityY(0);\r\n\r\n\r\n            var text3 = this.add.text(50, 100, `You completed all 3 levels!`, {\r\n                fontSize: '70px',\r\n                fill: '#ff0000'\r\n\r\n            });\r\n            text3.setScrollFactor(0);\r\n            timedEvent = this.time.delayedCall(3000, winEvent, [], this);\r\n            function winEvent() {\r\n\r\n                // nacteni skore a pridani nove serazeneho skore do pameti browseru\r\n                var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                if (testObject !== null) {\r\n                    scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                }\r\n                var scoreObject = {\r\n                    playerName: localStorage.getItem(\"playerName\"),\r\n                    score: totalScore,\r\n                };\r\n                if (scoreField === null || scoreField === undefined) {\r\n                    scoreField[0] = scoreObject;\r\n                }\r\n                else {\r\n                    scoreField.push(scoreObject);\r\n\r\n\r\n                    var length = scoreField.length;\r\n                    for (var i = (length - 1); i >= 0; i--) {\r\n                        for (var j = (length - i); j > 0; j--) {\r\n                            if (scoreField[j] === undefined) {\r\n                                break;\r\n                            }\r\n                            if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                var tmp = scoreField[j];\r\n                                scoreField[j] = scoreField[j - 1];\r\n                                scoreField[j - 1] = tmp;\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                coinScore = 0;\r\n\r\n                this.scene.stop();\r\n                this.scene.launch(\"MenuScene\");\r\n\r\n            }\r\n        }\r\n        if (coinScore !== 108) {\r\n\r\n            if (lives === 2) {\r\n\r\n                Srdce3.visible = false\r\n            }\r\n            if (lives === 1) {\r\n\r\n                Srdce2.visible = false;\r\n            }\r\n\r\n            if (lives === 0) {\r\n\r\n\r\n                Srdce1.visible = false;\r\n                var text3 = this.add.text(325, 100, `Game Over :(`, {\r\n                    fontSize: '80px',\r\n                    fill: '#ff0000'\r\n                });\r\n                text3.setScrollFactor(0);\r\n                timedEvent = this.time.delayedCall(3000, loseEvent, [], this);\r\n                function loseEvent() {\r\n                    // nacteni skore a pridani nove serazeneho skore do pameti browseru\r\n                    var testObject = JSON.parse(localStorage.getItem(\"score\"));\r\n                    if (testObject !== null) {\r\n                        scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n                    }\r\n                    var scoreObject = {\r\n                        playerName: localStorage.getItem(\"playerName\"),\r\n                        score: totalScore,\r\n                    };\r\n                    if (scoreField === null || scoreField === undefined) {\r\n                        scoreField[0] = scoreObject;\r\n                    }\r\n                    else {\r\n                        scoreField.push(scoreObject);\r\n\r\n\r\n                        var length = scoreField.length;\r\n                        for (var i = (length - 1); i >= 0; i--) {\r\n                            for (var j = (length - i); j > 0; j--) {\r\n                                if (scoreField[j] === undefined) {\r\n                                    break;\r\n                                }\r\n                                if (scoreField[j].score > scoreField[j - 1].score) {\r\n\r\n                                    var tmp = scoreField[j];\r\n                                    scoreField[j] = scoreField[j - 1];\r\n                                    scoreField[j - 1] = tmp;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    localStorage.setItem(\"score\", JSON.stringify(scoreField));\r\n                    totalScore = 0;\r\n                    coinScore = 0;\r\n\r\n                    this.scene.stop();\r\n                    this.scene.launch(\"MenuScene\");\r\n\r\n                }\r\n            }\r\n\r\n\r\n\r\n            if (spawn === 0) {\r\n                timedEvent = this.time.delayedCall(3000, spawn1Event, [], this);\r\n                function spawn1Event() {\r\n                    PurpleGhost.x = PurpleGhostRespawnX;\r\n                    PurpleGhost.y = PurpleGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(6000, spawn2Event, [], this);\r\n                function spawn2Event() {\r\n                    GreenGhost.x = GreenGhostRespawnX;\r\n                    GreenGhost.y = GreenGhostRespawnY;\r\n                }\r\n                timedEvent = this.time.delayedCall(9000, spawn3Event, [], this);\r\n                function spawn3Event() {\r\n                    GreyGhost.x = GreyGhostRespawnX;\r\n                    GreyGhost.y = GreyGhostRespawnY;\r\n                }\r\n                spawn = 1;\r\n            }\r\n\r\n\r\n            finder.findPath(Math.floor(RedGhost.x / 32), Math.floor(RedGhost.y / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path) {\r\n                if (path === null || path[1] === undefined) {\r\n\r\n                } else {\r\n                    if (bonusF === false) {\r\n\r\n                        if (path[1].x * 32 + 16 > RedGhost.x) {\r\n                            RedGhost.setVelocityX(speed / 2);\r\n                        }\r\n                        if (path[1].x * 32 + 16 < RedGhost.x) {\r\n                            RedGhost.setVelocityX(-speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 > RedGhost.y) {\r\n                            RedGhost.setVelocityY(speed / 2);\r\n                        }\r\n                        if (path[1].y * 32 + 16 < RedGhost.y) {\r\n                            RedGhost.setVelocityY(-speed / 2);\r\n                        }\r\n\r\n                        if (path[1].x * 32 + 16 === RedGhost.x) {\r\n                            RedGhost.setVelocityX(0)\r\n                        }\r\n                        if (path[1].y * 32 + 16 === RedGhost.y) {\r\n                            RedGhost.setVelocityY(0)\r\n                        }\r\n\r\n                    }\r\n                }\r\n            });\r\n            finder.calculate();\r\n\r\n            if ((distance(PacMan.x, PacMan.y, GreenGhost.x, GreenGhost.y) <= 192)) {\r\n\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n\r\n                switch (GreenTargetValue) {\r\n                    case 1:\r\n                        GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 32 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreenTargetCoordinateX = 704 / 32; GreenTargetCoordinateY = 32 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreenTargetCoordinateX = 960 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreenTargetCoordinateX = 1216 / 32; GreenTargetCoordinateY = 832 / 32; if (GreenTargetCoordinateX * 32 === GreenGhost.x - 16 && GreenTargetCoordinateY * 32 === GreenGhost.y - 16) GreenTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n                finder2.findPath(Math.floor((GreenGhost.x - 16) / 32), Math.floor((GreenGhost.y - 16) / 32), GreenTargetCoordinateX, GreenTargetCoordinateY, function (path2) {\r\n\r\n                    if (path2 === null || path2[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path2[1].x * 32 + 16 > GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path2[1].x * 32 + 16 < GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 > GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path2[1].y * 32 + 16 < GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path2[1].x * 32 + 16 === GreenGhost.x) {\r\n                                GreenGhost.setVelocityX(0)\r\n                            }\r\n                            if (path2[1].y * 32 + 16 === GreenGhost.y) {\r\n                                GreenGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder2.calculate();\r\n                });\r\n            }\r\n\r\n\r\n            if ((distance(PacMan.x, PacMan.y, PurpleGhost.x, PurpleGhost.y) <= 192)) {\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n                switch (PurpleTargetValue) {\r\n                    case 1:\r\n                        PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: PurpleTargetCoordinateX = 352 / 32; PurpleTargetCoordinateY = 832 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: PurpleTargetCoordinateX = 480 / 32; PurpleTargetCoordinateY = 32 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: PurpleTargetCoordinateX = 64 / 32; PurpleTargetCoordinateY = 32 / 32; if (PurpleTargetCoordinateX * 32 === PurpleGhost.x - 16 && PurpleTargetCoordinateY * 32 === PurpleGhost.y - 16) PurpleTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder3.findPath(Math.floor((PurpleGhost.x - 16) / 32), Math.floor((PurpleGhost.y - 16) / 32), PurpleTargetCoordinateX, PurpleTargetCoordinateY, function (path3) {\r\n\r\n                    if (path3 === null || path3[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path3[1].x * 32 + 16 > PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path3[1].x * 32 + 16 < PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 > PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path3[1].y * 32 + 16 < PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path3[1].x * 32 + 16 === PurpleGhost.x) {\r\n                                PurpleGhost.setVelocityX(0)\r\n                            }\r\n                            if (path3[1].y * 32 + 16 === PurpleGhost.y) {\r\n                                PurpleGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder3.calculate();\r\n                });\r\n            }\r\n\r\n\r\n\r\n            if ((distance(PacMan.x, PacMan.y, GreyGhost.x, GreyGhost.y) <= 192)) {\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), Math.floor(PacMan.x / 32), Math.floor(PacMan.y / 32), function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n\r\n            }\r\n            else {\r\n\r\n                switch (GreyTargetValue) {\r\n                    case 1:\r\n                        GreyTargetCoordinateX = 928 / 32; GreyTargetCoordinateY = 576 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 2;\r\n                        break;\r\n\r\n                    case 2: GreyTargetCoordinateX = 640 / 32; GreyTargetCoordinateY = 96 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 3;\r\n                        break;\r\n\r\n                    case 3: GreyTargetCoordinateX = 352 / 32; GreyTargetCoordinateY = 576 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 4;\r\n                        break;\r\n\r\n                    case 4: GreyTargetCoordinateX = 640 / 32; GreyTargetCoordinateY = 832 / 32; if (GreyTargetCoordinateX * 32 === GreyGhost.x - 16 && GreyTargetCoordinateY * 32 === GreyGhost.y - 16) GreyTargetValue = 1;\r\n                        break;\r\n\r\n                    default: break;\r\n\r\n                }\r\n\r\n                finder4.findPath(Math.floor((GreyGhost.x - 16) / 32), Math.floor((GreyGhost.y - 16) / 32), GreyTargetCoordinateX, GreyTargetCoordinateY, function (path4) {\r\n\r\n                    if (path4 === null || path4[1] === undefined) {\r\n\r\n                    } else {\r\n\r\n                        if (bonusF === false) {\r\n\r\n                            if (path4[1].x * 32 + 16 > GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(speed / 2);\r\n                            }\r\n                            if (path4[1].x * 32 + 16 < GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(-speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 > GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(speed / 2);\r\n                            }\r\n                            if (path4[1].y * 32 + 16 < GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(-speed / 2);\r\n                            }\r\n\r\n                            if (path4[1].x * 32 + 16 === GreyGhost.x) {\r\n                                GreyGhost.setVelocityX(0)\r\n                            }\r\n                            if (path4[1].y * 32 + 16 === GreyGhost.y) {\r\n                                GreyGhost.setVelocityY(0)\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n                    finder4.calculate();\r\n                });\r\n            }\r\n\r\n\r\n            if (PacMan.x > 1270) {\r\n                PacMan.x = 10\r\n            }\r\n            if (PacMan.x < 10) {\r\n                PacMan.x = 1270\r\n            }\r\n            if (PacMan.y > 886) {\r\n                PacMan.y = 10\r\n            }\r\n            if (PacMan.y < 10) {\r\n                PacMan.y = 886\r\n            }\r\n            \r\n\r\n            if (Math.floor((PacMan.x)) % 32 == 16) {\r\n\r\n                PacMan.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PacMan.y)) % 32 == 16) {\r\n                PacMan.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((RedGhost.x)) % 32 == 16) {\r\n\r\n                RedGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((RedGhost.y)) % 32 == 16) {\r\n                RedGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((GreenGhost.x)) % 32 == 16) {\r\n\r\n                GreenGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreenGhost.y)) % 32 == 16) {\r\n                GreenGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((GreyGhost.x)) % 32 == 16) {\r\n\r\n                GreyGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((GreyGhost.y)) % 32 == 16) {\r\n                GreyGhost.setVelocityY(0);\r\n            }\r\n\r\n            if (Math.floor((PurpleGhost.x)) % 32 == 16) {\r\n\r\n                PurpleGhost.setVelocityX(0);\r\n            }\r\n            if (Math.floor((PurpleGhost.y)) % 32 == 16) {\r\n                PurpleGhost.setVelocityY(0);\r\n            }\r\n\r\n            PacMan.y = Math.floor(PacMan.y);\r\n            PacMan.x = Math.floor(PacMan.x);\r\n\r\n            RedGhost.y = Math.floor(RedGhost.y)\r\n            RedGhost.x = Math.floor(RedGhost.x)\r\n\r\n            PurpleGhost.y = Math.floor(PurpleGhost.y)\r\n            PurpleGhost.x = Math.floor(PurpleGhost.x)\r\n\r\n            GreyGhost.y = Math.floor(GreyGhost.y)\r\n            GreyGhost.x = Math.floor(GreyGhost.x)\r\n\r\n            GreenGhost.y = Math.floor(GreenGhost.y)\r\n            GreenGhost.x = Math.floor(GreenGhost.x)\r\n\r\n            if (PacMan.body.velocity.x < 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan2\");\r\n            }\r\n\r\n            if (PacMan.body.velocity.x > 0) {\r\n                PacMan.angle = 0;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y < 0) {\r\n                PacMan.angle = 270;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n            if (PacMan.body.velocity.y > 0) {\r\n                PacMan.angle = 90;\r\n                PacMan.setTexture(\"PacMan\");\r\n            }\r\n\r\n            if ((keys.W.isDown || keys.S.isDown || keys.A.isDown || keys.D.isDown)) {\r\n\r\n                if (keys.W.isDown) {\r\n\r\n                    PacMan.setVelocityY(-1 * speed);\r\n\r\n                }\r\n                else if (keys.S.isDown) {\r\n                    PacMan.setVelocityY(speed);\r\n                }\r\n                if (keys.A.isDown) {\r\n                    PacMan.setVelocityX(-1 * speed);\r\n                }\r\n                else if (keys.D.isDown) {\r\n                    PacMan.setVelocityX(speed);\r\n                }\r\n\r\n            }\r\n\r\n            if (Phaser.Input.Keyboard.JustDown(esc)) {\r\n                this.scene.pause();\r\n                this.scene.launch(\"PauseScene3\");\r\n                keys.W.isDown = false;\r\n                keys.A.isDown = false;\r\n                keys.S.isDown = false;\r\n                keys.D.isDown = false;\r\n\r\n                resume = true;\r\n            }\r\n\r\n        }\r\n    }\r\n}","// inicializace promennych\r\nvar resumebutton;\r\nvar resume = false;\r\nvar menubutton;\r\n\r\n\r\nexport class PauseScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PauseScene\",\r\n        })\r\n    }\r\n    init(data) {\r\n    }\r\n\r\n    preload() {\r\n\r\n    }\r\n\r\n    create() {\r\n        // vytvoreni tlacitek\r\n        resumebutton = this.add.image(643, 535, 'resume');\r\n        menubutton = this.add.image(645, 505, 'menu');\r\n        resumebutton.setInteractive();\r\n        menubutton.setInteractive();\r\n\r\n        resumebutton.on('pointerup', function (pointer) {\r\n            resume = true;\r\n\r\n        });\r\n        // pri stisknuti tlacitka menu navrat do menu\r\n        menubutton.on('pointerup', function (pointer) {\r\n            this.scene.start(\"MenuScene\");\r\n            this.scene.stop(\"PlayScene\");\r\n            this.scene.stop();\r\n\r\n        }, this);\r\n    }\r\n\r\n    update() {\r\n        // obnoveni sceny hry\r\n        if (resume) {\r\n            resume = false;\r\n            this.scene.resume(\"PlayScene\");\r\n            this.scene.stop();\r\n        }\r\n    }\r\n}","// PauseScene2 je analogicka k PauseScene, zmenene jsou pouze nazvy, protoze funguji stejne jsou komentare pouze v PauseScene\r\nvar resumebutton;\r\nvar resume = false;\r\nvar menubutton;\r\n\r\nexport class PauseScene2 extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PauseScene2\",\r\n        })\r\n    }\r\n\r\n    init(data) {\r\n    }\r\n\r\n    preload() {\r\n    }\r\n\r\n    create() {\r\n\r\n        resumebutton = this.add.image(643, 535, 'resume');\r\n        menubutton = this.add.image(645, 505, 'menu');\r\n        resumebutton.setInteractive();\r\n        menubutton.setInteractive();\r\n\r\n        resumebutton.on('pointerup', function (pointer) {\r\n            resume = true;\r\n\r\n        });\r\n        menubutton.on('pointerup', function (pointer) {\r\n            this.scene.start(\"MenuScene\");\r\n            this.scene.stop(\"PlayScene2\");\r\n            this.scene.stop();\r\n\r\n        }, this);\r\n    }\r\n\r\n    update() {\r\n        if (resume) {\r\n            resume = false;\r\n            this.scene.resume(\"PlayScene2\");\r\n            this.scene.stop();\r\n        }\r\n    }\r\n}","// PauseScene3 je analogicka k PauseScene, zmenene jsou pouze nazvy, protoze funguji stejne jsou komentare pouze v PauseScene\r\nvar resumebutton;\r\nvar resume = false;\r\nvar menubutton;\r\n\r\nexport class PauseScene3 extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"PauseScene3\",\r\n        })\r\n    }\r\n\r\n    init(data) {\r\n    }\r\n\r\n    preload() {\r\n    }\r\n\r\n    create() {\r\n\r\n        resumebutton = this.add.image(643, 535, 'resume');\r\n        menubutton = this.add.image(645, 505, 'menu');\r\n        resumebutton.setInteractive();\r\n        menubutton.setInteractive();\r\n\r\n        resumebutton.on('pointerup', function (pointer) {\r\n            resume = true;\r\n\r\n        });\r\n        menubutton.on('pointerup', function (pointer) {\r\n            this.scene.start(\"MenuScene\");\r\n            this.scene.stop(\"PlayScene3\");\r\n            this.scene.stop();\r\n\r\n        }, this);\r\n    }\r\n\r\n    update() {\r\n        if (resume) {\r\n            resume = false;\r\n            this.scene.resume(\"PlayScene3\");\r\n            this.scene.stop();\r\n        }\r\n    }\r\n}","// inicializace promennych\r\nvar backsbutton;\r\nvar back = false;\r\nvar scoreText = [];\r\nvar nameText = [];\r\nvar scoreField = [];\r\nvar x;\r\nvar title;\r\nvar background;\r\n\r\nexport class LeaderBoardScene extends Phaser.Scene {\r\n    constructor() {\r\n        super({\r\n            key: \"LeaderBoardScene\",\r\n        })\r\n    }\r\n\r\n    preload() {\r\n        this.load.image(\"back\", \"./assets/Back2.png\");\r\n    }\r\n\r\n    create() {\r\n        // vytvoreni tlacitek z obrazku\r\n        background = this.add.image(640,448,\"background\")\r\n        title = this.add.image(640, 100, 'title');\r\n        backsbutton = this.add.image(160, 850, 'back');\r\n        backsbutton.setInteractive();\r\n\r\n        backsbutton.on('pointerup', function (pointer) {\r\n            back = true;\r\n\r\n\r\n        });\r\n\r\n        // nacteni skore a pridani nove serazeneho skore do pameti prohlizece\r\n        \r\n        scoreField = JSON.parse(localStorage.getItem(\"score\"));\r\n      \r\n        for (var i = 0; i < 10; i++) {\r\n            scoreText.push(this.add.text(800, 198 + i * 65));\r\n            nameText.push(this.add.text(400, 198 + i * 65));\r\n\r\n        }\r\n        if (scoreField !== null && scoreField !== undefined) {\r\n            x = scoreField.length;\r\n            if (x > 10) {\r\n                x = 10;\r\n            }\r\n            for (var i = 0; i < 10; i++) {\r\n                if (i < x) {\r\n                    scoreText[i].setText(\" \" + scoreField[i].score);\r\n                    nameText[i].setText(i + 1 + \": \" + scoreField[i].playerName);\r\n                }\r\n                else {\r\n                    nameText[i].setText(i + 1 + \": \");\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < 10; i++) {\r\n                scoreText[i].setText(i + 1 + \": \");\r\n            }\r\n        }\r\n\r\n    }\r\n    update() {\r\n        // pri stisknuti back se znovu spusti scena s menu\r\n        if (back) {\r\n            this.scene.start(\"MenuScene\");\r\n            back = false;\r\n            scoreText = [];\r\n            nameText = [];\r\n            scoreField = [];\r\n        }\r\n\r\n    }\r\n}","// soubor se zakladni konfiguraci Phaseru\r\n\r\n/* @type {import(\"../typings/phaser\")} */ // import typingu\r\n// importy scen\r\nimport { MenuScene } from \"./scenes/MenuScene\"; \r\nimport { PlayScene } from \"./scenes/PlayScene\"; \r\nimport { PlayScene2 } from \"./scenes/PlayScene2\"; \r\nimport { PlayScene3 } from \"./scenes/PlayScene3\"; \r\nimport { PauseScene } from \"./scenes/PauseScene\"; \r\nimport { PauseScene2 } from \"./scenes/PauseScene2\"; \r\nimport { PauseScene3 } from \"./scenes/PauseScene3\"; \r\nimport { LeaderBoardScene} from \"./scenes/LeaderBoardScene\"; \r\n\r\n// ohraniceni okna hry\r\nvar myCustomCanvas = document.createElement('canvas');\r\nmyCustomCanvas.id = 'myCustomCanvas';\r\nmyCustomCanvas.style = 'border: 4px solid black';\r\n\r\ndocument.body.appendChild(myCustomCanvas);\r\n\r\n// inicializace hry\r\nlet game = new Phaser.Game({\r\n    type: Phaser.AUTO,\r\n    width: 1280, // sirka okna\r\n    height: 896, // vyska okna\r\n    canvas: document.getElementById('myCustomCanvas'),\r\n    // seznam scen\r\n    scene: [\r\n        MenuScene, PlayScene, PauseScene, LeaderBoardScene, PlayScene2, PauseScene2, PlayScene3, PauseScene3\r\n\r\n    ],\r\n    audio: {\r\n        disableWebAudio: false\r\n    },\r\n    render: {\r\n        pixelArt: true\r\n    },\r\n    // nastaveni fyziky (typ, gravitace, fps ..)\r\n    physics: {\r\n        default: \"arcade\",\r\n        arcade: {\r\n            fps: 60,\r\n            gravity: { y: 0 },\r\n        }\r\n    }\r\n});\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}